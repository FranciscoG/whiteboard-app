(this.webpackJsonpwhiteboard=this.webpackJsonpwhiteboard||[]).push([[0],{132:function(e,t,n){e.exports={placer:"placer_placer___P3AP"}},135:function(e,t,n){},17:function(e,t,n){e.exports={controls:"Tools_controls__1Nbhf",toolBtn:"Tools_toolBtn__2uH3c",pointer:"Tools_pointer__1rXRd",active:"Tools_active__3uvvl",arrowSubMenu:"Tools_arrowSubMenu__2ucIk",text:"Tools_text__382N8"}},27:function(e,t,n){e.exports={bg:"modal_bg__3tErl",bgAppear:"modal_bgAppear__2XsUD",dialog:"modal_dialog__UQRek",appear:"modal_appear__3MYo9"}},291:function(e,t,n){"use strict";n.r(t);n(135);var i=n(0),o=n.n(i),a=n(33),r=n.n(a),c=n(11),s=n(9),l=n(8),u={esc:"Escape",enter:"Enter",backspace:"Backspace",del:"Delete"},d=Object(l.a)(Object(l.a)(Object(l.a)(Object(l.a)({},{0:"0",1:"1",2:"2",v:"v",h:"h",n:"n",p:"p",e:"e",z:"z",t:"t",space:" ",plus:"+",minus:"-","[":"[","]":"]","?":"?"}),{meta:"Meta",shift:"Shift"}),{up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight",tab:"Tab"}),u),b="mouse-pointer",f="pencil",j="eraser",h="sticky-note",x="text",m=["#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF"],v=n(40),g=n.n(v);function O(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return"string"===typeof e&&""!==e.trim()})).join(" ").trim()}function p(e){if(e.isContentEditable)return!0;var t=e.tagName.toLowerCase();if("textarea"===t)return!0;if("input"!==t)return!1;if(e.disabled)return!1;if(e.readonly)return!1;var n=(e.getAttribute("type")||"text").toLowerCase();return!!["date","datetime","datetime-local","email","month","number","password","search","tel","text","url","week"].includes(n)}var w=n(23),y=Object(w.b)({name:"tool",initialState:{cursor:b,draw:{thickness:5,color:"#FF6900"}},reducers:{setTool:function(e,t){e.cursor=t.payload},setDrawColor:function(e,t){e.draw.color=t.payload},setDrawThickness:function(e,t){e.draw.thickness=t.payload}}}),E=y.actions,N=E.setTool,_=E.setDrawColor,C=E.setDrawThickness,k=y.reducer,A={};A[d.p]=f,A[d.e]=j,A[d.v]=b,A[d.n]=h,A[d.t]=x;var S=function(){var e=Object(i.useState)(null),t=Object(s.a)(e,2),n=t[0],o=t[1],a=Object(c.d)();return Object(i.useEffect)((function(){function e(e){p(document.activeElement)||(e.metaKey&&e.shiftKey&&e.key===d.z?a(v.ActionCreators.redo()):e.shiftKey||!e.metaKey||e.key!==d.z||a(v.ActionCreators.undo()))}function t(e){if(!p(document.activeElement)){var t=A[e.key];t&&a(N(t)),o(e.key),setTimeout((function(){o(null)}),200)}}return window.addEventListener("keyup",t),window.addEventListener("keydown",e),function(){window.removeEventListener("keyup",t),window.removeEventListener("keydown",e)}}),[a]),{lastShortcut:n}},T=n(15),I=n(34),R=n(133),M=n(42),B=n.n(M),D=n(2);var Y=function(e){var t=e.id,n=e.label,o=e.hideLabel,a=void 0===o||o,r=e.step,c=void 0===r?"1":r,l=e.min,u=void 0===l?"1":l,d=e.max,b=e.startingValue,f=void 0===b?1:b,j=e.onChange,h=void 0===j?function(e){}:j,x=e.example,m=e.className,v=Object(i.useState)(f),g=Object(s.a)(v,2),p=g[0],w=g[1];return Object(D.jsxs)("div",{className:O("form-control",m,B.a.container),children:[Object(D.jsx)("label",{htmlFor:t,className:O("form-label",B.a.label,a&&"visually-hidden",!a&&"d-block"),children:n}),Object(D.jsx)("input",{className:O("form-range",B.a.range),type:"range",id:t,min:u,max:d,step:c,value:p,onChange:function(e){w(Number(e.target.value)),h(e)}}),x&&Object(D.jsx)("div",{className:B.a.example,children:x(p)})]})},L=n(43),z=n.n(L);var F={setDrawThickness:C,setDrawColor:_},P=Object(c.c)((function(e){return{draw:e.tool.draw}}),F)((function(e){var t=e.show,n=void 0!==t&&t,i=e.draw,o=e.setDrawColor,a=e.setDrawThickness;return Object(D.jsxs)("div",{className:O(z.a.settingsContainer,n&&z.a.show),children:[Object(D.jsx)(Y,{className:z.a.slider,id:"drawThickness",label:"Change the thickness of the drawing tool",min:"1",max:"40",startingValue:i.thickness,onChange:function(e){a(Number(e.target.value))},example:function(e){return Object(D.jsx)("svg",{viewBox:"0 0 100 100",width:"40",height:"40",xmlns:"http://www.w3.org/2000/svg",children:Object(D.jsxs)("g",{children:[Object(D.jsx)("circle",{cx:"50%",cy:"50%",r:e,fill:i.color}),Object(D.jsx)("text",{x:"50%",y:"50%",className:z.a.px,textAnchor:"middle",dominantBaseline:"middle",children:e})]})})}}),Object(D.jsx)(R.a,{color:i.color,triangle:null,colors:m,onChange:function(e){o(e.hex)}})]})})),q=n(60),X=n.n(q);var Q=function(e){var t=e.id,n=e.children,a=e.startX,r=void 0===a?0:a,c=e.startY,u=void 0===c?0:c,b=e.onDragEnd,f=void 0===b?function(e){e.x,e.y}:b,j=Object(i.useRef)(null),h=Object(i.useRef)(!1),x=Object(i.useRef)(null),m=Object(i.useState)(!1),v=Object(s.a)(m,2),g=v[0],p=v[1],w=Object(i.useRef)(null),y=Object(i.useState)({x:r,y:u}),E=Object(s.a)(y,2),N=E[0],_=E[1];Object(i.useEffect)((function(){w.current=j.current.getBoundingClientRect()}),[]);var C=Object(i.useCallback)((function(e){var t=e.shiftKey?20:5;switch(e.key){case d.right:_((function(e){return e.x>=window.innerWidth-w.current.width?e:{x:e.x+t,y:e.y}}));break;case d.left:_((function(e){return e.x<=20?e:{x:e.x-t,y:e.y}}));break;case d.up:_((function(e){return e.y<=20?e:{x:e.x,y:e.y-t}}));break;case d.down:_((function(e){return e.y>=window.innerHeight-w.current.height?e:{x:e.x,y:e.y+t}}))}}),[]);function k(){x.current&&(window.removeEventListener("keydown",C),x.current=null,p(!1))}function A(){h.current&&(h.current=!1,window.removeEventListener("mousemove",S),window.removeEventListener("mouseup",A),document.body.classList.remove("cursor-grabbing"),f(N))}function S(e){h.current&&_((function(t){var n=e.clientX,i=e.clientY;return n>=window.innerWidth-w.current.width?n=t.x:n<=5&&(n=5),i>=window.innerHeight-w.current.height?i=t.y:i<=5&&(i=5),{x:n,y:i}}))}var T=N.x-7,I=N.y-15,R=g?O(n.props.className,X.a.keyMoving):n.props.className;return Object(D.jsxs)("div",{className:O(X.a.dragContainer),style:{top:"".concat(I,"px"),left:"".concat(T,"px")},children:[Object(D.jsx)("span",{id:t,className:"visually-hidden",children:"Press Spacebar to Grab"}),Object(D.jsx)("button",{className:X.a.handle,onMouseDown:function(e){0===e.button&&(e.preventDefault(),k(),h.current=!0,window.addEventListener("mousemove",S),window.addEventListener("mouseup",A),document.body.classList.add("cursor-grabbing"))},onKeyUp:function(e){if(x.current)switch(e.key){case d.enter:case d.space:k(),f(N);break;case d.esc:_(x.current),k()}else x.current||e.key!==d.space&&e.key!==d.enter||(A(),x.current=Object(l.a)({},N),p(!0),window.addEventListener("keydown",C))},"aria-describedby":t,children:Object(D.jsxs)("span",{className:"visually-hidden",children:["Move ",t," on the canvas"]})}),o.a.cloneElement(n,{ref:j,className:R})]})},J=n(128),U=n(129),Z=n(130),G=n(131),H=n(17),W=n.n(H);var K={setTool:N},V=Object(c.c)((function(e){return{cursor:e.tool.cursor}}),K)((function(e){var t=e.setTool,n=e.cursor,o=Object(i.useState)(!1),a=Object(s.a)(o,2),r=a[0],c=a[1];return Object(D.jsx)(Q,{id:"drag-tools",startX:20,startY:.2*window.innerHeight,children:Object(D.jsxs)("div",{className:"shadow-light ".concat(W.a.controls),children:[Object(D.jsx)("button",{id:"tool-".concat(b),type:"button",className:O("btn-clear",W.a.toolBtn,W.a.pointer,n===b&&W.a.active),"data-tooltip":"Select (V)",onClick:function(){c(!1),t(b)},children:Object(D.jsx)(J.a,{})}),Object(D.jsxs)("button",{id:"tool-".concat(f),type:"button",className:O("btn-clear",W.a.toolBtn,n===f&&W.a.active),"data-tooltip":"Draw (P)",onClick:function(){c(!1),n===f?c(!r):t(f)},children:[Object(D.jsx)(U.a,{}),Object(D.jsx)("span",{className:W.a.arrowSubMenu})]}),Object(D.jsx)(P,{show:n===f&&r}),Object(D.jsx)("button",{id:"tool-".concat(j),type:"button",className:O("btn-clear",W.a.toolBtn,n===j&&W.a.active),"data-tooltip":"Erase (E)",onClick:function(){c(!1),t(j)},children:Object(D.jsx)(G.a,{})}),Object(D.jsx)("button",{id:"tool-".concat(h),type:"button",className:O("btn-clear",W.a.toolBtn,n===h&&W.a.active),"data-tooltip":"Note (N)",onClick:function(){c(!1),t(h)},children:Object(D.jsx)(Z.a,{})}),Object(D.jsx)("button",{id:"tool-".concat(x),type:"button",className:O("btn-clear",W.a.toolBtn,n===x&&W.a.active),"data-tooltip":"Text (T)",onClick:function(){c(!1),t(x)},children:Object(D.jsx)("span",{className:W.a.text,children:"T"})})]})})})),$=n(85),ee=n(294),te=Object(w.b)({name:"canvas",initialState:{lines:[],items:[]},reducers:{setLines:function(e,t){return Object(l.a)(Object(l.a)({},e),{},{lines:t.payload})},addLine:function(e,t){return Object(l.a)(Object(l.a)({},e),{},{lines:[].concat(Object($.a)(e.lines),[t.payload])})},addItem:function(e,t){if(!t.payload.type)throw new Error("item is missing a type "+JSON.stringify(t.payload));var n=e.items.map((function(e){return e.selected=!1,e}));t.payload.id=Object(ee.a)(),e.items=[].concat(Object($.a)(n),[t.payload])},updateItem:function(e,t){e.items=e.items.map((function(e){return e.selected=!1,e.id===t.payload.id?t.payload:e}))},deleteItem:function(e){e.items=e.items.filter((function(e){return!e.selected}))}}}),ne=te.actions,ie=ne.setLines,oe=(ne.addLine,ne.addItem),ae=ne.updateItem,re=ne.deleteItem,ce=function(e){return e.canvas.present.lines},se=te.reducer,le=Object(w.b)({name:"note",initialState:{activeNote:void 0,newNote:void 0},reducers:{setActiveNote:function(e,t){e.activeNote=t.payload},clearActiveNote:function(e){e.activeNote=void 0},setNewNote:function(e,t){e.newNote=t.payload},clearNewNote:function(e){e.newNote=void 0}}}),ue=le.actions,de=ue.setActiveNote,be=ue.clearActiveNote,fe=ue.setNewNote,je=ue.clearNewNote,he=le.reducer,xe=n(27),me=n.n(xe),ve=document.getElementById("modal-root");function ge(e,t){var n=e.id,o=e.title,r=e.hideTitle,c=void 0!==r&&r,s=e.children,l=e.onHide,u=void 0===l?function(){}:l,b=Object(i.useRef)(null),f=Object(i.useRef)(null);function j(){f.current.classList.remove(me.a.appear),b.current.classList.remove(me.a.bgAppear),setTimeout(u,350)}Object(i.useEffect)((function(){return document.body.classList.add("has-dialog"),document.querySelector("#root").setAttribute("aria-hidden","true"),setTimeout((function(){f.current&&f.current.classList.add(me.a.appear),b.current&&b.current.classList.add(me.a.bgAppear)}),100),function(){document.body.classList.remove("has-dialog"),document.querySelector("#root").removeAttribute("aria-hidden")}}),[]),Object(i.useImperativeHandle)(t,(function(){return{hide:j}}));var h=Object(D.jsx)("div",{ref:b,className:me.a.bg,onKeyUp:function(e){e.key===d.esc&&j()},onClick:function(e){e.target.classList.contains(me.a.bg)&&j()},children:Object(D.jsxs)("div",{role:"dialog",id:n,"aria-labelledby":"".concat(n,"_label"),"aria-modal":"true",className:me.a.dialog,ref:f,children:[Object(D.jsx)("div",{id:"".concat(n,"_label"),className:c?"visually-hidden":null,children:o}),s]})});return Object(a.createPortal)(h,ve)}var Oe=Object(i.forwardRef)(ge),pe=n(61),we=n.n(pe);var ye=function(e){var t=e.className,n=e.selected,o=e.palette,a=e.onSelectColor,r=void 0===a?function(e){}:a,c=Object(i.useState)(n),l=Object(s.a)(c,2),u=l[0],d=l[1];return Object(D.jsxs)("fieldset",{className:O(we.a.fieldset,t),children:[Object(D.jsx)("legend",{className:"visually-hidden",children:"Select a color"}),o.map((function(e){return Object(D.jsxs)("div",{className:"form-group ".concat(we.a.wrap),children:[Object(D.jsx)("input",{className:we.a.radio,type:"radio",name:"color",id:"color-".concat(e),checked:e===u,onChange:function(e){d(e.target.value),r(e.target.value)},value:e}),Object(D.jsx)("label",{htmlFor:"color-".concat(e),style:{backgroundColor:e},children:e})]},e)}))]})},Ee=n(36),Ne=n.n(Ee),_e=["#feff9c","#6ed2d0","#def350","#ff6b81","#ff339a","#ff992a"],Ce={type:h,id:null,x:null,y:null,width:300,height:300,text:"",fontSize:32,color:_e[0],scaleX:.75,scaleY:.75,rotation:0};var ke={updateItem:ae,setNewNote:fe},Ae=Object(c.c)(null,ke)((function(e){var t=e.onSave,n=void 0===t?function(){}:t,o=e.onCancel,a=void 0===o?function(){}:o,r=e.onClose,c=void 0===r?function(){}:r,l=e.note,u=void 0===l?Ce:l,d=e.x,b=e.y,f=e.updateItem,j=e.setNewNote,h=Object(i.useState)(u.text),x=Object(s.a)(h,2),m=x[0],v=x[1],g=Object(i.useState)(u.fontSize),p=Object(s.a)(g,2),w=p[0],y=p[1],E=Object(i.useState)(u.color),N=Object(s.a)(E,2),_=N[0],C=N[1],k=Object(i.useRef)(null),A=Object(i.useRef)(null),S=Object(i.useRef)(null);return Object(i.useEffect)((function(){k.current&&k.current.focus()}),[k]),Object(D.jsx)(Oe,{id:"addNote",title:"Add Sticky Note",hideTitle:!0,ref:S,onHide:function(){c()},children:Object(D.jsx)("div",{children:Object(D.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t={text:m,fontSize:w,color:_};if(u.id)f(Object.assign({},u,t));else{t.x=d,t.y=b;var i=A.current.getBoundingClientRect();t.origin={x:i.x,y:i.y},j(Object.assign({},u,t))}n(),S.current.hide()},children:[Object(D.jsxs)("div",{ref:A,style:{backgroundColor:_},className:O("form-group","flex-center",Ne.a.note),children:[Object(D.jsx)("label",{className:"visually-hidden",id:"stickyNoteLabel",children:"Enter your sticky note text"}),Object(D.jsx)("div",{className:Ne.a.textContainer,children:Object(D.jsx)("div",{ref:k,style:{fontSize:w+"px"},role:"textbox","aria-multiline":"true","aria-labelledby":"stickyNoteLabel","aria-required":"true",className:Ne.a.textEdit,contentEditable:!0,suppressContentEditableWarning:!0,tabIndex:0,onInput:function(e){v(e.target.textContent)},children:u.text})})]}),Object(D.jsxs)("div",{className:Ne.a.actions,children:[Object(D.jsx)(Y,{hideLabel:!1,id:"noteFontSize",label:"Change the font size",min:"32",max:"128",startingValue:w,onChange:function(e){y(Number(e.target.value))}}),Object(D.jsx)("div",{className:O("p-2",Ne.a.colors),children:Object(D.jsx)(ye,{selected:_,palette:_e,onSelectColor:function(e){C(e)}})}),Object(D.jsxs)("div",{className:"d-flex justify-content-end mt-4 pe-2",children:[Object(D.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:function(e){e.preventDefault(),a(),S.current.hide()},children:"cancel"}),Object(D.jsx)("button",{className:"btn btn-primary ms-2",type:"submit",children:"save"})]})]})]})})})})),Se=n(1),Te=n.n(Se);Te.a.shape({tool:Te.a.string.isRequired,color:Te.a.string.isRequired,thickness:Te.a.number.isRequired,points:Te.a.arrayOf(Te.a.number).isRequired});var Ie=function(e){var t=e.line;return t?Object(D.jsx)(T.c,{points:t.points,stroke:t.color,strokeWidth:t.tool===j?20:t.thickness,tension:.5,lineCap:t.tool===j?"square":"round",globalCompositeOperation:t.tool===j?"destination-out":"source-over"}):null};var Re=function(e){var t=e.lines,n=void 0===t?[]:t;return Object(D.jsx)(D.Fragment,{children:n.map((function(e,t){return Object(D.jsx)(Ie,{line:e},"line-".concat(t))}))})},Me=n(134);var Be=function(e){var t=e.enabled,n=void 0!==t&&t,a=e.onTransformEnd,r=e.onTransform,c=void 0===r?function(e,t){}:r,s=e.minWidth,u=void 0===s?100:s,d=e.minHeight,b=void 0===d?100:d,f=e.withRef,j=void 0===f?null:f,h=e.children,x=e.anchors,m=void 0===x?["top-left","top-right","bottom-right","bottom-left"]:x,v=e.keepRatio,g=void 0===v||v,O=e.rotateEnabled,p=void 0===O||O,w=Object(Me.a)(e,["enabled","onTransformEnd","onTransform","minWidth","minHeight","withRef","children","anchors","keepRatio","rotateEnabled"]),y=Object(i.useRef)(null),E=Object(i.useRef)(null);return Object(i.useEffect)((function(){n&&(E.current.nodes([y.current]),E.current.getLayer().batchDraw())}),[n]),Object(i.useEffect)((function(){"function"===typeof j&&y.current&&j(y)}),[y,j]),Object(D.jsxs)(D.Fragment,{children:[o.a.cloneElement(h,{ref:y,onTransformEnd:function(e){a(y.current,e)},onTransform:function(e){c(y.current,e)}}),n&&Object(D.jsx)(T.g,Object(l.a)(Object(l.a)({},w),{},{ref:E,keepRatio:g,rotateEnabled:p,enabledAnchors:m,boundBoxFunc:function(e,t){return t.width<u||t.height<b?e:t}}))]})};Te.a.shape({id:Te.a.string,x:Te.a.number.isRequired,y:Te.a.number.isRequired,width:Te.a.number.isRequired,height:Te.a.number.isRequired,text:Te.a.string.isRequired,fontSize:Te.a.number.isRequired,color:Te.a.string.isRequired,scaleX:Te.a.number,scaleY:Te.a.number,rotation:Te.a.number});var De={addItem:oe,updateItem:ae,setActiveNote:de,clearNewNote:je},Ye=Object(c.c)((function(e){return{currentTool:e.tool.cursor}}),De)((function(e){var t=e.note,n=e.setActiveNote,i=e.currentTool,o=e.clearNewNote,a=e.addItem,r=e.updateItem;return Object(D.jsx)(Be,{enabled:t.selected&&i===b,onTransformEnd:function(e){r(Object(l.a)(Object(l.a)({},t),{},{x:e.x(),y:e.y(),scaleX:e.scaleX(),scaleY:e.scaleY(),rotation:e.rotation()}))},withRef:function(e){e.current&&t.origin&&e.current.to({x:t.x,y:t.y,duration:.2,onFinish:function(){a(Object(l.a)(Object(l.a)({},t),{},{origin:null})),o()}})},children:Object(D.jsxs)(T.a,{draggable:i===b,x:t.origin?t.origin.x:t.x,y:t.origin?t.origin.y:t.y,rotation:t.rotation,onClick:function(e){2!==e.evt.detail||n(t)},onDragEnd:function(e){r(Object(l.a)(Object(l.a)({},t),{},{x:e.target.x(),y:e.target.y()}))},onMouseDown:function(e){1!==e.evt.detail||t.selected||r(Object(l.a)(Object(l.a)({},t),{},{selected:!0}))},scaleX:t.scaleX,scaleY:t.scaleY,children:[Object(D.jsx)(T.d,{fill:t.color,width:t.width,height:t.height,shadowOffsetX:0,shadowOffsetY:5,shadowBlur:3,shadowEnabled:!0,shadowColor:"#3c4043",shadowOpacity:.26}),Object(D.jsx)(T.f,{width:t.width,height:t.height,text:t.text,fontSize:t.fontSize,fontFamily:"sans-serif",fill:"#000000",align:"center",verticalAlign:"middle",fontStyle:"bold"})]})})})),Le=Object(w.b)({name:"text",initialState:{activeText:void 0},reducers:{setActiveText:function(e,t){e.activeText=t.payload},clearActiveText:function(e){e.activeText=void 0}}}),ze=Le.actions,Fe=ze.setActiveText,Pe=ze.clearActiveText,qe=Le.reducer;Te.a.shape({id:Te.a.string,x:Te.a.number.isRequired,y:Te.a.number.isRequired,width:Te.a.number.isRequired,height:Te.a.number.isRequired,text:Te.a.string,fontSize:Te.a.number.isRequired,color:Te.a.string.isRequired,scaleX:Te.a.number,scaleY:Te.a.number,rotation:Te.a.number});var Xe={updateItem:ae,setActiveText:Fe},Qe=Object(c.c)((function(e){return{currentTool:e.tool.cursor,currentActiveText:e.text.activeText}}),Xe)((function(e){var t=e.data,n=e.updateItem,i=e.setActiveText,o=e.currentTool,a=e.currentActiveText;return Object(D.jsx)(Be,{anchors:["top-left","top-right","bottom-left","bottom-right","top-center","bottom-center","middle-left","middle-right"],keepRatio:!1,enabled:t.selected&&o===b&&(null===a||void 0===a?void 0:a.id)!==t.id,onTransformEnd:function(e){n(Object(l.a)(Object(l.a)({},t),{},{x:e.x(),y:e.y(),width:e.width(),height:e.height()}))},onTransform:function(e){var t=Math.max(e.width()*e.scaleX(),40),n=Math.max(e.height()*e.scaleY(),40);e.setAttrs({width:t,height:n,scaleX:1,scaleY:1})},children:Object(D.jsx)(T.f,{draggable:o===b,x:t.x,y:t.y,rotation:t.rotation,onClick:function(e){2!==e.evt.detail||i(t)},onDragEnd:function(e){n(Object(l.a)(Object(l.a)({},t),{},{x:e.target.x(),y:e.target.y()}))},onMouseDown:function(e){1!==e.evt.detail||t.selected||n(Object(l.a)(Object(l.a)({},t),{},{selected:!0}))},scaleX:t.scaleX,scaleY:t.scaleY,width:t.width,height:t.height,text:(null===a||void 0===a?void 0:a.id)===t.id?"":t.text,fontSize:t.fontSize,fontFamily:"sans-serif",fill:"#000000",align:"left",verticalAlign:"top",fontStyle:"bold",lineHeight:1.5})})}));function Je(e){var t=e.item;switch(t.type){case h:return Object(D.jsx)(Ye,{note:t},t.id);case x:return Object(D.jsx)(Qe,{data:t},t.id);default:return null}}var Ue=function(e){var t=e.items,n=e.lines,i=e.newNote,o=t.find((function(e){return e.selected}));return Object(D.jsxs)(T.b,{children:[Object(D.jsx)(Re,{lines:n}),t.filter((function(e){return!e.selected})).map((function(e){return Object(D.jsx)(Je,{item:e},e.id)})),o&&Object(D.jsx)(Je,{item:o}),i&&Object(D.jsx)(Ye,{note:i})]})},Ze=n(132),Ge=n.n(Ze);var He=function(e){var t=e.width,n=e.height,o=e.onFinish,a=e.onCancel,r=Object(i.useRef)(null);return Object(i.useEffect)((function(){function e(e){r.current&&(r.current.style.top="".concat(e.clientY,"px"),r.current.style.left="".concat(e.clientX,"px"))}function t(e){o(e.clientX,e.clientY,e)}function n(e){e.key===u.esc&&a()}return window.addEventListener("mousemove",e),window.addEventListener("click",t),window.addEventListener("keyup",n),function(){window.removeEventListener("mousemove",e),window.removeEventListener("click",t),window.removeEventListener("keyup",n)}}),[a,o]),Object(D.jsx)("div",{ref:r,style:{width:"".concat(t,"px"),height:"".concat(n,"px")},className:Ge.a.placer})},We=n(84),Ke=n.n(We),Ve={type:x,x:0,y:0,width:null,height:null,text:"",fontSize:32,color:"#000000",scaleX:1,scaleY:1,rotation:0};var $e=function(e){var t=e.x,n=void 0===t?0:t,o=e.y,a=void 0===o?0:o,r=e.textData,c=void 0===r?Ve:r,s=e.onSave,u=e.onCancel,b=Object(i.useRef)({x:n,y:a}),f=Object(i.useRef)(null),j=c.width&&c.height?{width:c.width,height:c.height}:{width:400,height:58};return Object(D.jsx)(Q,{id:"flyingTextInput",startX:n,startY:a-25,onDragEnd:function(e){b.current=e,console.log(b.current,e)},children:Object(D.jsxs)("form",{className:Ke.a.inputContainer,children:[Object(D.jsx)("label",{className:"visually-hidden",htmlFor:"enterText",children:"Add text to canvas"}),Object(D.jsx)("div",{style:j,ref:f,autoCorrect:"off",autoCapitalize:"off",role:"textbox","aria-multiline":"true","aria-labelledby":"enterText",className:Ke.a.input,contentEditable:!0,suppressContentEditableWarning:!0,tabIndex:0,onKeyUp:function(e){e.key===d.enter||e.key===d.esc&&u()},onBlur:function(e){if(e.target.textContent.trim()){var t=f.current.getBoundingClientRect();s(Object(l.a)(Object(l.a)({},c),{},{x:b.current.x,y:b.current.y,width:t.width,height:t.height,text:e.target.textContent}))}else u()},children:c.text})]})})};function et(e,t,n){var i=e.target.getStage().getPointerPosition(),o=n[n.length-1];return o.points=t===f?o.points.concat([i.x,i.y+26]):o.points.concat([i.x+13,i.y+13]),n.splice(n.length-1,1,o),Array.from(n)}var tt=function(){var e=Object(i.useState)(f),t=Object(s.a)(e,2),n=t[0],o=t[1],a=Object(i.useState)([]),r=Object(s.a)(a,2),l=r[0],u=r[1],d=Object(i.useRef)(!1),b=Object(i.useRef)(!1),j=Object(c.d)(),h=Object(c.e)((function(e){return e.tool.draw.color})),x=Object(c.e)((function(e){return e.tool.draw.thickness})),m=Object(c.e)(ce);return Object(i.useEffect)((function(){u(m)}),[m,u]),{lines:l,drawMouseDown:function(e){if(0===e.evt.button){d.current=!0;var t=e.target.getStage().getPointerPosition();if(n===f){var i=Array.from(l);i.push({tool:n,color:h,thickness:x,points:[t.x,t.y+26]}),u(i)}else{var o=Array.from(l);o.push({tool:n,color:h,thickness:x,points:[t.x+13,t.y+13]}),u(o)}}},drawMouseMove:function(e){d.current&&(b.current=!0,u(et(e,n,l)))},drawMouseUp:function(e){d.current=!1,b.current?b.current=!1:u(et(e,n,l)),setTimeout((function(){j(ie(l))}),1)},setDrawTool:o}},nt=[{isPlacing:!1,isPlaced:!1},{isPlacing:!0,isPlaced:!1},{isPlacing:!1,isPlaced:!0}];var it=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Object(i.useRef)(0),n=Object(i.useState)(nt[t.current]),o=Object(s.a)(n,2),a=o[0],r=o[1],c=Object(i.useState)({x:0,y:0}),l=Object(s.a)(c,2),u=l[0],d=l[1];function b(){t.current=0,r(nt[0])}function f(e,n){e&&n&&d({x:e,y:n}),t.current===nt.length-1?b():(t.current=t.current+1,r(nt[t.current]))}return Object(i.useEffect)((function(){e&&(t.current=1,r(nt[1]))}),[e]),{state:a,reset:b,position:u,next:f}};var ot={setTool:N,clearActiveNote:be,clearActiveText:Pe,deleteItem:re,addItem:oe,updateItem:ae},at=Object(c.c)((function(e){return{currentTool:e.tool.cursor,canvasItems:e.canvas.present,editNote:e.note.activeNote,newNote:e.note.newNote,editText:e.text.activeText}}),ot)((function(e){var t=e.currentTool,n=e.setTool,o=e.canvasItems,a=e.editNote,r=e.clearActiveNote,l=e.newNote,u=e.lastShortcut,m=e.clearActiveText,v=e.editText,g=e.deleteItem,O=e.addItem,p=e.updateItem,w=tt(),y=w.lines,E=w.drawMouseDown,N=w.drawMouseMove,_=w.drawMouseUp,C=w.setDrawTool,k=Object(i.useState)({w:window.innerWidth,h:window.innerHeight}),A=Object(s.a)(k,2),S=A[0],R=A[1],M=Object(i.useState)(!1),B=Object(s.a)(M,2),Y=B[0],L=B[1],z=it(h===t),F=it(x===t),P=new Image;return P.onload=function(){L(!0)},P.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAB50lEQVR4Xu3VPU9UUQAG4UMClAQlrBRrIVJLKf+/glJqPgq2kDWCoVsw0YSCim4p5obn/oCTuTN5z9lYrVb/hi9jYEOQTItnEEFaPQSJ9RBEkJqBGI83RJCYgRiOhQgSMxDDsRBBYgZiOBYiSMxADMdCBIkZiOFYiCAxAzEcCxEkZiCGYyGCxAzEcCxEkJiBGI6FCBIzEMOxEEFiBmI4FiJIzEAMx0IEiRmI4ViIIDEDMRwLESRmIIZjIYLEDMRwLESQmIEYjoUIEjMQw5nMQh6f/o7F7Z+x/P0wZns7Y/5pd2xvbcZ0ro8zmSBXN7/G2fnFyx9//3Y0Dj/vr28gdsJkgpz+uBzXi+WLvi/z2Tg5/hrTuT7OZIJYyPqx3/SE5zfk5/1Y3j2M2cedMT/44A15U8MOe9XAZK6s99JPkFhpQQSJGYjhWIggMQMxHAsRJGYghmMhgsQMxHAsRJCYgRiOhQgSMxDDsRBBYgZiOBYiSMxADMdCBIkZiOFYiCAxAzEcCxEkZiCGYyGCxAzEcCxEkJiBGI6FCBIzEMOxEEFiBmI4FiJIzEAMx0IEiRmI4ViIIDEDMRwLESRmIIZjIYLEDMRwLESQmIEYjoUIEjMQw7EQQWIGYjgWIkjMQAzHQgSJGYjh/Adx+KvcF/eo4AAAAABJRU5ErkJggg==",Object(i.useEffect)((function(){C(t)}),[t,C]),Object(i.useEffect)((function(){u===d.del&&g()}),[u,g]),Object(i.useEffect)((function(){var e=Object(I.a)((function(){R({w:window.innerWidth,h:window.innerHeight})}),25);return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(c.b.Consumer,{children:function(e){var n=e.store;return Object(D.jsxs)(T.e,{width:S.w,height:S.h,tabIndex:0,onMouseDown:function(e){t!==f&&t!==j||E(e)},onMousemove:function(e){t!==f&&t!==j||N(e)},onMouseup:function(e){t!==f&&t!==j||_(e)},className:"whiteboard cursor-".concat(t),children:[Object(D.jsx)(T.b,{listening:!1,children:Y&&Object(D.jsx)(T.d,{x:0,y:0,width:S.w,height:S.h,fillPatternImage:P,listening:!1})}),Object(D.jsx)(c.a,{store:n,children:Object(D.jsx)(Ue,{items:o.items,lines:y,newNote:l})})]})}}),z.state.isPlacing&&Object(D.jsx)(He,{width:"200",height:"200",onFinish:function(e,t){z.next(e,t)},onCancel:function(){z.reset(),n(b)}}),F.state.isPlacing&&Object(D.jsx)(He,{width:"400",height:"80",onFinish:function(e,t){F.next(e,t)},onCancel:function(){F.reset(),n(b)}}),Object(D.jsx)(V,{}),F.state.isPlaced&&Object(D.jsx)($e,{x:F.position.x,y:F.position.y,onSave:function(e){O(e),n(b),m(),F.reset()},onCancel:function(){n(b),m(),F.reset()}}),v&&Object(D.jsx)($e,{x:v.x,y:v.y,textData:v,onSave:function(e){p(e),n(b),m()},onCancel:function(){n(b),m()}}),(z.state.isPlaced||a)&&Object(D.jsx)(Ae,{note:a,x:z.position.x,y:z.position.y,onClose:function(){n(b),r(),z.reset()}})]})}));var rt=function(){var e=S().lastShortcut;return Object(D.jsx)("div",{className:"App",children:Object(D.jsx)(at,{lastShortcut:e})})},ct=n(19),st=Object(ct.c)({tool:k,canvas:g()(se),note:he,text:qe}),lt=Object(w.a)({reducer:st});r.a.render(Object(D.jsx)(o.a.StrictMode,{children:Object(D.jsx)(c.a,{store:lt,children:Object(D.jsx)(rt,{})})}),document.getElementById("root"))},36:function(e,t,n){e.exports={note:"addNoteModal_note__gFYx9",textarea:"addNoteModal_textarea__12CPn",textContainer:"addNoteModal_textContainer__2ESK8",textEdit:"addNoteModal_textEdit__2C1sA",actions:"addNoteModal_actions__OuQAq",colors:"addNoteModal_colors__iM_1T"}},42:function(e,t,n){e.exports={container:"slider_container__2Tm_d",range:"slider_range__1xNOW",example:"slider_example__313gz"}},43:function(e,t,n){e.exports={settingsContainer:"drawSettings_settingsContainer__3BARp",show:"drawSettings_show__1IpqZ",slider:"drawSettings_slider__s1xYo",px:"drawSettings_px__239md"}},60:function(e,t,n){e.exports={dragContainer:"draggable_dragContainer__37P1o",handle:"draggable_handle__2zrDe",keyMoving:"draggable_keyMoving__j1IX4"}},61:function(e,t,n){e.exports={fieldset:"colorPicker_fieldset__B-ZSC",radio:"colorPicker_radio__2wjUZ",wrap:"colorPicker_wrap___SnW6"}},84:function(e,t,n){e.exports={inputContainer:"flyingTextInput_inputContainer__OjZHS",input:"flyingTextInput_input__12fUF"}}},[[291,1,2]]]);
//# sourceMappingURL=main.2b30738c.chunk.js.map