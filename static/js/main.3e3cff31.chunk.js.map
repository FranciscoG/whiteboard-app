{"version":3,"sources":["components/placer/index.module.scss","features/tools/Tools.module.css","components/alignment/alignment.module.scss","components/modal/modal.module.css","assets/icons/align-top.svg","assets/icons/align-middle.svg","assets/icons/align-bottom.svg","utils/KEYS.js","features/tools/constants.js","utils/index.js","features/tools/toolSlice.js","hooks/useShortcuts.js","components/slider/index.js","features/tools/drawSettings/index.js","components/draggable/index.js","features/tools/index.js","canvas/canvasSlice.js","features/note/noteSlice.js","components/modal/index.js","components/colorPicker/index.js","components/alignment/index.js","features/note/addNoteModal/index.js","features/draw/line.js","features/draw/index.js","components/Transformable/index.js","features/note/index.js","features/text/textSlice.js","features/text/index.js","canvas/layerManager.js","components/placer/index.js","features/text/flyingTextInput/index.js","features/draw/useDraw.js","hooks/usePlacing.js","canvas/index.js","assets/bg-pattern2.png","app/App.js","app/rootReducer.js","app/store.js","index.js","features/note/addNoteModal/addNoteModal.module.css","components/slider/slider.module.css","features/tools/drawSettings/drawSettings.module.css","components/draggable/draggable.module.scss","components/colorPicker/colorPicker.module.scss","features/text/flyingTextInput/index.module.scss"],"names":["module","exports","ACTIONS","esc","enter","backspace","del","all","v","h","n","p","e","z","t","space","plus","minus","meta","shift","up","down","left","right","tab","POINTER","DRAW","ERASE","NOTE","TEXT","lineColors","cn","classNames","filter","cls","trim","join","isEditable","el","isContentEditable","tagName","toLowerCase","disabled","readonly","type","getAttribute","includes","round100th","num","Math","round","Number","EPSILON","toolSlice","createSlice","name","initialState","cursor","draw","thickness","color","reducers","setTool","state","action","payload","setDrawColor","setDrawThickness","actions","ACTIONS_MAP","KEYS","useShortcuts","useState","lastShortcut","setLastShortcut","dispatch","useDispatch","useEffect","onKeyDown","document","activeElement","metaKey","shiftKey","key","ActionCreators","redo","undo","onKeyUp","matchingAction","setTimeout","window","addEventListener","removeEventListener","Slider","id","label","hideLabel","step","min","max","startingValue","onChange","example","className","value","setValue","styles","container","htmlFor","range","target","mapDispatchToProps","connect","tool","show","settingsContainer","slider","viewBox","width","height","xmlns","cx","cy","r","fill","x","y","px","textAnchor","dominantBaseline","triangle","colors","c","hex","Draggable","children","startX","startY","onDragEnd","childRef","useRef","isDragging","isUsingKeys","isKeyDragging","setIsKeyDragging","rect","pos","setPos","current","getBoundingClientRect","onKeyMove","useCallback","spaces","innerWidth","innerHeight","disableKeys","disableMouse","onMouseMove","body","classList","remove","clientX","clientY","finalClass","props","keyMoving","dragContainer","style","top","handle","onMouseDown","button","preventDefault","add","aria-describedby","React","cloneElement","ref","showSettings","setShowSettings","controls","toolBtn","pointer","active","data-tooltip","onClick","aria-hidden","arrowSubMenu","text","canvasSlice","lines","items","setLines","addLine","addItem","Error","JSON","stringify","deselected","map","selected","uuidv1","updateItem","deleteItem","clearSelected","selectLines","canvas","present","noteSlice","activeNote","undefined","newNote","setActiveNote","clearActiveNote","setNewNote","clearNewNote","modalContainer","getElementById","Modal","title","hideTitle","onHide","bgRef","dialogRef","animatedHide","appear","bgAppear","querySelector","setAttribute","removeAttribute","useImperativeHandle","hide","content","bg","contains","role","aria-labelledby","aria-modal","dialog","createPortal","forwardRef","ColorPicker","palette","onSelectColor","setActive","fieldset","wrap","radio","checked","backgroundColor","svgMap","require","default","center","middle","bottom","Alignment","selectedHorizontal","selectedVertical","onChangeHorizontal","onChangeVertical","activeHoriz","setActiveHoriz","activeVert","setActiveVert","i","aria-invalid","alt","src","ColorPalette","defaultNote","fontSize","scaleX","scaleY","rotation","align","verticalAlign","matchDispatchToProps","onSave","onCancel","onClose","note","editText","setEditText","setFontSize","currentColor","setCurrentColor","textHoriz","setTextHoriz","textVert","setTextVert","noteRef","noteWrapRef","modalRef","focus","onSubmit","Object","assign","bounds","origin","textContainer","textAlign","aria-multiline","aria-required","textEdit","contentEditable","suppressContentEditableWarning","tabIndex","onInput","textContent","newAlignment","PropTypes","shape","string","isRequired","number","points","arrayOf","DrawSingleLine","line","stroke","strokeWidth","tension","lineCap","globalCompositeOperation","Draw","Transformable","enabled","onTransformEnd","onTransform","node","minWidth","minHeight","withRef","anchors","keepRatio","rotateEnabled","transformProps","nodeRef","trRef","nodes","getLayer","batchDraw","enabledAnchors","boundBoxFunc","oldBox","newBox","currentTool","to","duration","onFinish","draggable","evt","detail","shadowOffsetX","shadowOffsetY","shadowBlur","shadowEnabled","shadowColor","shadowOpacity","padding","fontFamily","fontStyle","textSlice","activeText","setActiveText","clearActiveText","currentActiveText","data","lastScale","debounce","setAttrs","lineHeight","DrawItem","item","LayerManager","Placer","onMove","placer","defaultText","FlyingTextInput","textData","positionRef","inputRef","styleObj","console","log","inputContainer","autoCorrect","autoCapitalize","input","onBlur","connectPoints","point","getStage","getPointerPosition","lastLine","length","concat","TOOL_SIZE","splice","Array","from","useDraw","isDrawing","isMoving","useSelector","linesFromState","drawMouseDown","newLines","push","drawMouseMove","drawMouseUp","reducerSetLine","setDrawTool","states","isIdle","isPlacing","isPlaced","usePlacing","index","currentState","setCurrentState","position","setPosition","reset","next","canvasItems","editNote","w","stageDim","setStageDim","bgImageLoadded","setBgImageLoadded","notePlacing","textPlacing","bgImage","Image","onload","find","debouncedResize","Consumer","store","constructor","onMousemove","onMouseup","listening","fillPatternImage","updatedTextData","App","combineReducers","toolReducer","undoable","canvasReducer","noteReducer","textReducer","configureStore","reducer","rootReducer","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.3e3cff31.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"placer\":\"placer_placer___P3AP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"controls\":\"Tools_controls__1Nbhf\",\"toolBtn\":\"Tools_toolBtn__2uH3c\",\"pointer\":\"Tools_pointer__1rXRd\",\"active\":\"Tools_active__3uvvl\",\"arrowSubMenu\":\"Tools_arrowSubMenu__2ucIk\",\"text\":\"Tools_text__382N8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"fieldset\":\"alignment_fieldset__2_LAT\",\"radio\":\"alignment_radio__12Jza\",\"label-1\":\"alignment_label-1__3AHHS\",\"label-3\":\"alignment_label-3__3OE4L\",\"wrap\":\"alignment_wrap__2-hle\",\"label\":\"alignment_label__38TwN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"bg\":\"modal_bg__3tErl\",\"bgAppear\":\"modal_bgAppear__2XsUD\",\"dialog\":\"modal_dialog__UQRek\",\"appear\":\"modal_appear__3MYo9\"};","export default __webpack_public_path__ + \"static/media/align-top.66e36ea3.svg\";","export default __webpack_public_path__ + \"static/media/align-middle.c7187bf0.svg\";","export default __webpack_public_path__ + \"static/media/align-bottom.5504fcb1.svg\";","\nexport const KEYS = {\n  '0': '0',\n  '1': '1',\n  '2': '2',\n  v : 'v',\n  h : 'h',\n  n : 'n',\n  p : 'p',\n  e: 'e',\n  z: 'z',\n  t: 't',\n  space: ' ',\n  plus: '+',\n  minus: '-',\n  '[': '[',\n  ']': ']',\n  '?' : '?'\n}\n\nexport const MOVERS = {\n  up: 'ArrowUp',\n  down: 'ArrowDown',\n  left: 'ArrowLeft',\n  right: 'ArrowRight',\n  tab: 'Tab'\n}\n\nexport const ACTIONS = {\n  esc: 'Escape',\n  enter: 'Enter',\n  backspace: 'Backspace',\n  del: 'Delete'\n}\n\nexport const MODIFIERS = {\n  meta: 'Meta', // event.metaKey\n  shift: 'Shift', // event.shiftKey\n}\n\n// combine them all into one single object\nconst all = {\n  ...KEYS,\n  ...MODIFIERS,\n  ...MOVERS,\n  ...ACTIONS\n};\n\nexport default all;","export const TOOL_SIZE = 26;\n\nexport const POINTER = 'mouse-pointer';\nexport const DRAW = 'pencil';\nexport const ERASE = 'eraser';\nexport const NOTE = 'sticky-note';\nexport const TEXT = 'text';\n\nexport const lineColors = [\n  \"#FF6900\",\n  \"#FCB900\",\n  \"#7BDCB5\",\n  \"#00D084\",\n  \"#8ED1FC\",\n  \"#0693E3\",\n  \"#ABB8C3\",\n  \"#EB144C\",\n  \"#F78DA7\",\n  \"#9900EF\",\n];","/**\n * function that takes any amount of strings and filters out anything falsy and\n * returns a single joined string to be used in className attributes\n * @param  {...string} classNames\n */\nexport function cn(...classNames) {\n  return classNames\n    .filter((cls) => {\n      // we should only ever have non-empty strings in the array, everything\n      // else is ignored\n      return typeof cls === \"string\" && cls.trim() !== \"\";\n    })\n    .join(\" \")\n    .trim();\n}\n\nexport function isEditable(el) {\n  if (el.isContentEditable) return true;\n  const tagName = el.tagName.toLowerCase();\n  if (tagName === \"textarea\") return true;\n  if (tagName !== \"input\") return false;\n  if (el.disabled) return false;\n  if (el.readonly) return false;\n\n  const type = (el.getAttribute(\"type\") || \"text\").toLowerCase();\n  // if any of these input types is not supported by a browser, it will behave as input type text.\n  const inputTypes = [\n    \"date\",\n    \"datetime\",\n    \"datetime-local\",\n    \"email\",\n    \"month\",\n    \"number\",\n    \"password\",\n    \"search\",\n    \"tel\",\n    \"text\",\n    \"url\",\n    \"week\",\n  ];\n  if (inputTypes.includes(type)) return true;\n  \n  return false;\n}\n\n/**\n * Searches for the deepest child node of a starting parent node and specifically\n * looking in a specific index\n */\nexport function getDeepestChildAtIndex(startingEl, index = 0) {\n  const child = startingEl.children[index];\n  if (!child) return startingEl;\n  return getDeepestChildAtIndex(child, index);\n}\n\n/**\n * get a random number between min and max, inclusive\n * @param {number} min \n * @param {number} max \n */\nexport function ranB(min, max) {\n  min = Math.ceil(min);\n  max = Math.floor(max);\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n\n/**\n * round to the nearest hundredths decimal place\n * src: https://stackoverflow.com/a/11832950\n * @param {number} num \n */\nexport const round100th = num => Math.round((num + Number.EPSILON) * 100) / 100","import { createSlice } from \"@reduxjs/toolkit\";\n\nimport { POINTER } from \"features/tools/constants\";\n\nconst toolSlice = createSlice({\n  name: \"tool\",\n  initialState: {\n    cursor: POINTER,\n    draw: {\n      thickness: 5,\n      color: \"#FF6900\",\n    },\n  },\n  reducers: {\n    setTool(state, action) {\n      state.cursor = action.payload\n    },\n    setDrawColor(state, action) {\n      state.draw.color = action.payload\n    },\n    setDrawThickness(state, action) {\n      state.draw.thickness = action.payload\n    },\n  },\n});\n\nexport const { setTool, setDrawColor, setDrawThickness } = toolSlice.actions;\n\nexport default toolSlice.reducer;\n","import { useEffect, useState } from \"react\";\nimport KEYS from \"utils/KEYS\";\nimport { DRAW, ERASE, NOTE, POINTER, TEXT } from \"features/tools/constants\";\n\nimport { ActionCreators } from \"redux-undo\";\nimport { useDispatch } from \"react-redux\";\nimport { isEditable } from \"utils\";\nimport { setTool } from \"features/tools/toolSlice\";\n\nconst ACTIONS_MAP = {};\nACTIONS_MAP[KEYS.p] = DRAW;\nACTIONS_MAP[KEYS.e] = ERASE;\nACTIONS_MAP[KEYS.v] = POINTER;\nACTIONS_MAP[KEYS.n] = NOTE;\nACTIONS_MAP[KEYS.t] = TEXT;\n\nfunction useShortcuts() {\n  const [lastShortcut, setLastShortcut] = useState(null);\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    function onKeyDown(e) {\n      if (isEditable(document.activeElement)) {\n        return;\n      }\n\n      if (e.metaKey && e.shiftKey && e.key === KEYS.z) {\n        dispatch(ActionCreators.redo());\n        return;\n      }\n\n      if (!e.shiftKey && e.metaKey && e.key === KEYS.z) {\n        dispatch(ActionCreators.undo());\n        return;\n      }\n    }\n\n    function onKeyUp(e) {\n      if (isEditable(document.activeElement)) {\n        return;\n      }\n\n      const matchingAction = ACTIONS_MAP[e.key];\n      if (matchingAction) {\n        dispatch(setTool(matchingAction));\n      }\n\n      setLastShortcut(e.key);\n      setTimeout(() => {\n        setLastShortcut(null);\n      }, 200)\n    }\n\n    window.addEventListener(\"keyup\", onKeyUp);\n    window.addEventListener(\"keydown\", onKeyDown);\n\n    return function cleanup() {\n      window.removeEventListener(\"keyup\", onKeyUp);\n      window.removeEventListener(\"keydown\", onKeyDown);\n    };\n  }, [dispatch]);\n\n  return { lastShortcut };\n}\n\nexport default useShortcuts;\n","import { useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { cn } from \"utils\";\nimport styles from \"./slider.module.css\";\n\nfunction Slider({\n  id,\n  label,\n  hideLabel = true,\n  step = \"1\",\n  min = \"1\",\n  max,\n  startingValue = 1,\n  onChange = (e) => {},\n  example,\n  className,\n}) {\n  const [value, setValue] = useState(startingValue);\n\n  return (\n    <div className={cn(\"form-control\", className, styles.container)}>\n      <label\n        htmlFor={id}\n        className={cn(\n          \"form-label\",\n          styles.label,\n          hideLabel && \"visually-hidden\",\n          !hideLabel && \"d-block\"\n        )}\n      >\n        {label}\n      </label>\n      <input\n        className={cn(\"form-range\", styles.range)}\n        type=\"range\"\n        id={id}\n        min={min}\n        max={max}\n        step={step}\n        value={value}\n        onChange={(e) => {\n          setValue(Number(e.target.value));\n          onChange(e);\n        }}\n      />\n      {example && <div className={styles.example}>{example(value)}</div>}\n    </div>\n  );\n}\n\nSlider.propTypes = {\n  id: PropTypes.string.isRequired,\n  label: PropTypes.string.isRequired,\n  hideLabel: PropTypes.bool,\n  step: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  min: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  max: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n  startingValue: PropTypes.number,\n  onChange: PropTypes.func,\n  className: PropTypes.string,\n\n  /**\n   * renderProp: if set, it will get passed the value and must return a React.Element\n   */\n  example: PropTypes.func,\n};\n\nexport default Slider;\n","import { connect } from \"react-redux\";\nimport { TwitterPicker as ColorPicker } from \"react-color\";\nimport { cn } from \"utils\";\nimport Slider from \"components/slider\";\nimport { setDrawColor, setDrawThickness } from \"features/tools/toolSlice\";\nimport { lineColors } from 'features/tools/constants';\nimport styles from \"./drawSettings.module.css\";\n\nfunction DrawSettings({ show = false, draw, setDrawColor, setDrawThickness }) {\n  return (\n    <div className={cn(styles.settingsContainer, show && styles.show)}>\n      <Slider\n        className={styles.slider}\n        id=\"drawThickness\"\n        label=\"Change the thickness of the drawing tool\"\n        min=\"1\"\n        max=\"40\"\n        startingValue={draw.thickness}\n        onChange={(e) => {\n          setDrawThickness(Number(e.target.value));\n        }}\n        example={(value) => (\n          <svg viewBox=\"0 0 100 100\" width=\"40\" height=\"40\" xmlns=\"http://www.w3.org/2000/svg\">\n            <g>\n              <circle cx=\"50%\" cy=\"50%\" r={value} fill={draw.color} />\n              <text\n                x=\"50%\"\n                y=\"50%\"\n                className={styles.px}\n                textAnchor=\"middle\"\n                dominantBaseline=\"middle\"\n              >\n                {value}\n              </text>\n            </g>\n          </svg>\n        )}\n      />\n      <ColorPicker\n        color={draw.color}\n        triangle={null}\n        colors={lineColors}\n        onChange={(c) => {\n          setDrawColor(c.hex);\n        }}\n      />\n    </div>\n  );\n}\n\nconst mapStateToProps = (state) => ({\n  draw: state.tool.draw,\n});\n\nconst mapDispatchToProps = { setDrawThickness, setDrawColor };\n\nexport default connect(mapStateToProps, mapDispatchToProps)(DrawSettings);\n","import React, { useEffect, useRef, useState, useCallback } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { cn } from \"utils\";\nimport KEYS from \"utils/KEYS\";\nimport styles from \"./draggable.module.scss\";\n\n/**\n * a11y help: https://medium.com/salesforce-ux/4-major-patterns-for-accessible-drag-and-drop-1d43f64ebf09\n *\n * TODO: Aria live region\n */\n\nfunction Draggable({ id, children, startX = 0, startY = 0, onDragEnd = ({x,y}) => {} }) {\n  const childRef = useRef(null);\n  const isDragging = useRef(false);\n  const isUsingKeys = useRef(null);\n  const [isKeyDragging, setIsKeyDragging] = useState(false);\n  const rect = useRef(null);\n  const [pos, setPos] = useState({ x: startX, y: startY });\n\n  /**\n   * This gets the dimensions of the draggable items just once on mount so that\n   * we can prevent the draggable item from going out of the bounds of the window\n   */\n  useEffect(() => {\n    rect.current = childRef.current.getBoundingClientRect();\n  }, []);\n\n  const onKeyMove = useCallback((e) => {\n    const spaces = e.shiftKey ? 20 : 5;\n    switch (e.key) {\n      case KEYS.right:\n        setPos((p) => {\n          if (p.x >= window.innerWidth - rect.current.width) return p;\n          return {\n            x: p.x + spaces,\n            y: p.y,\n          };\n        });\n        break;\n      case KEYS.left:\n        setPos((p) => {\n          if (p.x <= 20) {\n            return p;\n          }\n          return {\n            x: p.x - spaces,\n            y: p.y,\n          };\n        });\n        break;\n      case KEYS.up:\n        setPos((p) => {\n          if (p.y <= 20) {\n            return p;\n          }\n          return {\n            x: p.x,\n            y: p.y - spaces,\n          };\n        });\n        break;\n      case KEYS.down:\n        setPos((p) => {\n          if (p.y >= window.innerHeight - rect.current.height) return p;\n          return {\n            x: p.x,\n            y: p.y + spaces,\n          };\n        });\n        break;\n      default:\n      // do nothing\n    }\n  }, []);\n\n  function disableKeys() {\n    if (isUsingKeys.current) {\n      window.removeEventListener(\"keydown\", onKeyMove);\n      isUsingKeys.current = null;\n      setIsKeyDragging(false);\n    }\n  }\n\n  function disableMouse() {\n    if (isDragging.current) {\n      isDragging.current = false;\n      window.removeEventListener(\"mousemove\", onMouseMove);\n      window.removeEventListener(\"mouseup\", disableMouse);\n      document.body.classList.remove(\"cursor-grabbing\");\n      onDragEnd(pos)\n    }\n  }\n\n  function onMouseMove(e) {\n    if (!isDragging.current) {\n      return;\n    }\n    setPos((p) => {\n      let x = e.clientX;\n      let y = e.clientY;\n\n      if (x >= window.innerWidth - rect.current.width) {\n        x = p.x;\n      } else if (x <= 5) {\n        x = 5;\n      }\n\n      if (y >= window.innerHeight - rect.current.height) {\n        y = p.y;\n      } else if (y <= 5) {\n        y = 5;\n      }\n\n      return {\n        x,\n        y,\n      };\n    });\n  }\n\n  /**\n   * This begins the drag listener by attaching events to the window\n   */\n  function onMouseDown(e) {\n    if (e.button === 0) {\n      e.preventDefault();\n      disableKeys();\n      isDragging.current = true;\n      window.addEventListener(\"mousemove\", onMouseMove);\n      window.addEventListener(\"mouseup\", disableMouse);\n      document.body.classList.add(\"cursor-grabbing\");\n    }\n  }\n\n  function onKeyUp(e) {\n    if (isUsingKeys.current) {\n      switch (e.key) {\n        case KEYS.enter:\n        case KEYS.space:\n          disableKeys();\n          onDragEnd(pos)\n          break;\n        case KEYS.esc:\n          // reset to original position\n          setPos(isUsingKeys.current);\n          disableKeys();\n          break;\n        default:\n        // nothing\n      }\n      return;\n    }\n\n    if (!isUsingKeys.current && (e.key === KEYS.space || e.key === KEYS.enter)) {\n      disableMouse();\n      isUsingKeys.current = { ...pos };\n      setIsKeyDragging(true);\n      window.addEventListener(\"keydown\", onKeyMove);\n    }\n  }\n\n  // offset the position of the handle so it doesn't jump (much) when grabbing it\n  const x = pos.x - 7;\n  const y = pos.y - 15;\n\n  const finalClass = isKeyDragging\n    ? cn(children.props.className, styles.keyMoving)\n    : children.props.className;\n\n  return (\n    <div className={cn(styles.dragContainer)} style={{ top: `${y}px`, left: `${x}px` }}>\n      <span id={id} className=\"visually-hidden\">\n        Press space bar to grab\n      </span>\n      <button\n        className={styles.handle}\n        onMouseDown={onMouseDown}\n        onKeyUp={onKeyUp}\n        aria-describedby={id}\n      >\n        <span className=\"visually-hidden\">Move {id} on the canvas</span>\n      </button>\n\n      {/* There should only be one child */}\n      {React.cloneElement(children, { ref: childRef, className: finalClass })}\n    </div>\n  );\n}\n\nDraggable.propTypes = {\n  id: PropTypes.string.isRequired,\n  children: PropTypes.node.isRequired,\n  startX: PropTypes.number,\n  startY: PropTypes.number,\n  onDragEnd: PropTypes.func,\n};\n\nexport default Draggable;\n","import { useState } from 'react';\nimport { connect } from \"react-redux\";\n\nimport { setTool } from \"features/tools/toolSlice\";\nimport { DRAW, ERASE, NOTE, POINTER, TEXT } from \"features/tools/constants\";\nimport { cn } from \"utils\";\nimport DrawSettings from \"features/tools/drawSettings\";\nimport Draggable from 'components/draggable';\n\nimport { ReactComponent as Pointer } from \"@fortawesome/fontawesome-free/svgs/solid/mouse-pointer.svg\";\nimport { ReactComponent as Pen } from \"@fortawesome/fontawesome-free/svgs/solid/pen.svg\";\nimport { ReactComponent as Note } from \"@fortawesome/fontawesome-free/svgs/solid/sticky-note.svg\";\nimport { ReactComponent as Eraser } from \"@fortawesome/fontawesome-free/svgs/solid/eraser.svg\";\nimport styles from \"./Tools.module.css\";\n\nfunction Tools({ setTool, cursor }) {\n  const [showSettings, setShowSettings] = useState(false);\n\n  return (\n    <Draggable id=\"drag-tools\" startX={20} startY={window.innerHeight * 0.2}>\n      <div className={`shadow-light ${styles.controls}`}>\n        <button\n          id={`tool-${POINTER}`}\n          type=\"button\"\n          className={cn(\n            \"btn-clear\",\n            styles.toolBtn,\n            styles.pointer,\n            cursor === POINTER && styles.active\n          )}\n          data-tooltip=\"Select (V)\"\n          onClick={() => {\n            setShowSettings(false);\n            setTool(POINTER);\n          }}\n        >\n          <Pointer aria-hidden=\"true\" />\n          <span className=\"visually-hidden\">Select tool</span>\n        </button>\n        <button\n          id={`tool-${DRAW}`}\n          type=\"button\"\n          className={cn(\"btn-clear\", styles.toolBtn, cursor === DRAW && styles.active)}\n          data-tooltip=\"Draw (P)\"\n          onClick={() => {\n            setShowSettings(false);\n            if (cursor !== DRAW) {\n              setTool(DRAW);\n              return;\n            } else {\n              setShowSettings(!showSettings);\n            }\n          }}\n        >\n          <Pen />\n          <span className=\"visually-hidden\">Pen tool</span>\n          <span className={styles.arrowSubMenu}/>\n        </button>\n        <DrawSettings show={cursor === DRAW && showSettings}  />\n        <button\n          id={`tool-${ERASE}`}\n          type=\"button\"\n          className={cn(\"btn-clear\", styles.toolBtn, cursor === ERASE && styles.active)}\n          data-tooltip=\"Erase (E)\"\n          onClick={() => {\n            setShowSettings(false);\n            setTool(ERASE);\n          }}\n        >\n          <Eraser />\n          <span className=\"visually-hidden\">Eraser tool</span>\n        </button>\n        <button\n          id={`tool-${NOTE}`}\n          type=\"button\"\n          className={cn(\"btn-clear\", styles.toolBtn, cursor === NOTE && styles.active)}\n          data-tooltip=\"Note (N)\"\n          onClick={() => {\n            setShowSettings(false);\n            setTool(NOTE);\n          }}\n        >\n          <Note />\n          <span className=\"visually-hidden\">Add a sticky note to the canvas</span>\n        </button>\n        <button\n          id={`tool-${TEXT}`}\n          type=\"button\"\n          className={cn(\"btn-clear\", styles.toolBtn, cursor === TEXT && styles.active)}\n          data-tooltip=\"Text (T)\"\n          onClick={() => {\n            setShowSettings(false);\n            setTool(TEXT);\n          }}\n        >\n          <span aria-hidden=\"true\" className={styles.text}>T</span>\n          <span className=\"visually-hidden\">Add text to the canvas</span>\n        </button>\n      </div>\n    </Draggable>\n  );\n}\n\nconst mapStateToProps = (state) => ({\n  cursor: state.tool.cursor,\n});\n\nconst mapDispatchToProps = { setTool };\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Tools);\n","import { createSlice } from \"@reduxjs/toolkit\";\nimport { v1 as uuidv1 } from \"uuid\";\n\n/**\n * This reducer/state will hold on the content placed on the canvas and will\n * allow us to under/redo it\n */\nconst canvasSlice = createSlice({\n  name: \"canvas\",\n  initialState: {\n    lines: [],\n    items: [],\n  },\n  reducers: {\n    /**************************************************\n     * Drawing lines\n     */\n    setLines(state, action) {\n      return {\n        ...state,\n        lines: action.payload,\n      };\n    },\n    addLine(state, action) {\n      return {\n        ...state,\n        lines: [...state.lines, action.payload],\n      };\n    },\n\n    /**************************************************\n     * all other items\n     */\n    addItem(state, action) {\n      if (!action.payload.type) {\n        throw new Error(\"item is missing a type \" + JSON.stringify(action.payload));\n      }\n\n      /**\n       * deselect any previous item\n       */\n      const deselected = state.items.map((n) => {\n        n.selected = false;\n        return n;\n      });\n\n      // give new item an id\n      action.payload.id = uuidv1();\n\n      // add item\n      state.items = [...deselected, action.payload];\n    },\n\n    updateItem(state, action) {\n      /**\n       * deselect any previous item\n       * replace item with matching ID with one in the payload\n       */\n      state.items = state.items.map((n) => {\n        n.selected = false;\n        if (n.id === action.payload.id) {\n          return action.payload;\n        }\n        return n;\n      });\n    },\n\n    deleteItem(state) {\n      // delete the currently selected note\n      state.items = state.items.filter((n) => !n.selected);\n    },\n    clearSelected(state) {\n      state.items = state.items.map((n) => {\n        n.selected = false;\n        return n;\n      });\n    },\n  },\n});\n\nexport const {\n  setLines,\n  addLine,\n  addItem,\n  updateItem,\n  deleteItem,\n  clearSelected,\n} = canvasSlice.actions;\n\nexport const selectLines = (state) => state.canvas.present.lines;\n\nexport default canvasSlice.reducer;\n","import { createSlice } from \"@reduxjs/toolkit\";\n\nconst noteSlice = createSlice({\n  name: \"note\",\n  initialState: { activeNote: undefined, newNote: undefined },\n  reducers: {\n    setActiveNote(state, action) {\n      state.activeNote = action.payload;\n    },\n    clearActiveNote(state) {\n      state.activeNote = undefined;\n    },\n    setNewNote(state, action) {\n      state.newNote = action.payload;\n    },\n    clearNewNote(state) {\n      state.newNote = undefined;\n    },\n  },\n});\n\nexport const { setActiveNote, clearActiveNote, setNewNote, clearNewNote } = noteSlice.actions;\n\nexport default noteSlice.reducer;\n","import { useEffect, useRef, forwardRef, useImperativeHandle } from \"react\";\nimport { createPortal } from \"react-dom\";\nimport KEYS from \"utils/KEYS\";\nimport styles from \"./modal.module.css\";\n\nconst modalContainer = document.getElementById(\"modal-root\");\n\nfunction Modal({ id, title, hideTitle = false, children, onHide = () => {} }, ref) {\n  const bgRef = useRef(null);\n  const dialogRef = useRef(null);\n\n  useEffect(() => {\n    document.body.classList.add(\"has-dialog\");\n    document.querySelector(\"#root\").setAttribute(\"aria-hidden\", \"true\");\n\n    setTimeout(() => {\n      if (dialogRef.current) {\n        dialogRef.current.classList.add(styles.appear);\n      }\n      if (bgRef.current) {\n        bgRef.current.classList.add(styles.bgAppear);\n      }\n    }, 100);\n\n    return function cleanup() {\n      document.body.classList.remove(\"has-dialog\");\n      document.querySelector(\"#root\").removeAttribute(\"aria-hidden\");\n    };\n  }, []);\n\n  function animatedHide() {\n    dialogRef.current.classList.remove(styles.appear);\n    bgRef.current.classList.remove(styles.bgAppear);\n    setTimeout(onHide, 350);\n  }\n\n  function onBgKeyUp(e) {\n    if (e.key === KEYS.esc) {\n      animatedHide();\n    }\n  }\n\n  function onBgClick(e) {\n    if (e.target.classList.contains(styles.bg)) {\n      animatedHide();\n    }\n  }\n\n  useImperativeHandle(ref, () => ({\n    hide: animatedHide,\n  }));\n\n  const content = (\n    <div ref={bgRef} className={styles.bg} onKeyUp={onBgKeyUp} onClick={onBgClick}>\n      <div\n        role=\"dialog\"\n        id={id}\n        aria-labelledby={`${id}_label`}\n        aria-modal=\"true\"\n        className={styles.dialog}\n        ref={dialogRef}\n      >\n        <div id={`${id}_label`} className={hideTitle ? \"visually-hidden\" : null}>\n          {title}\n        </div>\n        {children}\n      </div>\n    </div>\n  );\n\n  return createPortal(content, modalContainer);\n}\n\nexport default forwardRef(Modal);\n","import { useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { cn } from \"utils\";\nimport styles from \"./colorPicker.module.scss\";\n\nfunction ColorPicker({ className, selected, palette, onSelectColor = (color) => {} }) {\n  const [active, setActive] = useState(selected);\n\n  return (\n    <fieldset className={cn(styles.fieldset, className)}>\n      <legend className=\"visually-hidden\">Select a color</legend>\n      {palette.map((color) => (\n        <div className={`form-group ${styles.wrap}`} key={color}>\n          <input\n            className={styles.radio}\n            type=\"radio\"\n            name=\"color\"\n            id={`color-${color}`}\n            checked={color === active}\n            onChange={(e) => {\n              setActive(e.target.value);\n              onSelectColor(e.target.value);\n            }}\n            value={color}\n          />\n          <label htmlFor={`color-${color}`} style={{ backgroundColor: color }}>\n            {color}\n          </label>\n        </div>\n      ))}\n    </fieldset>\n  );\n}\n\nColorPicker.propTypes = {\n  /**\n   * Add a className to the containing fieldset to alter styles locally\n   */\n  className: PropTypes.string,\n\n  /**\n   * Set the selected color\n   */\n  selected: PropTypes.string,\n\n  /**\n   * populate the color palette\n   */\n  palette: PropTypes.arrayOf(PropTypes.string).isRequired,\n\n  /**\n   * event handler when a new color is selected\n   */\n  onSelectColor: PropTypes.func,\n};\n\nexport default ColorPicker;\n","import { useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { cn } from \"utils\";\nimport styles from \"./alignment.module.scss\";\n\nconst svgMap = {\n  left: require(\"@fortawesome/fontawesome-free/svgs/solid/align-left.svg\").default,\n  center: require(\"@fortawesome/fontawesome-free/svgs/solid/align-center.svg\").default,\n  right: require(\"@fortawesome/fontawesome-free/svgs/solid/align-right.svg\").default,\n  top: require('assets/icons/align-top.svg').default,\n  middle: require('assets/icons/align-middle.svg').default,\n  bottom: require('assets/icons/align-bottom.svg').default,\n};\n\nfunction Alignment({\n  className,\n  selectedHorizontal = \"center\",\n  selectedVertical = \"middle\",\n  onChangeHorizontal,\n  onChangeVertical,\n}) {\n  const [activeHoriz, setActiveHoriz] = useState(selectedHorizontal);\n  const [activeVert, setActiveVert] = useState(selectedVertical);\n\n  return (\n    <div className={cn(\"d-flex justify-content-around\", className)}>\n      <fieldset className={styles.fieldset}>\n        <legend className=\"visually-hidden\">Select a horizontal alignment</legend>\n        {[\"left\", \"center\", \"right\"].map((h, i) => (\n          <div className={cn(\"form-group\", styles.wrap)} key={`align-horiz-${h}`}>\n            <input\n              className={styles.radio}\n              type=\"radio\"\n              name=\"horizontal\"\n              id={`align-horiz-${h}`}\n              checked={h === activeHoriz}\n              onChange={(e) => {\n                setActiveHoriz(e.target.value);\n                onChangeHorizontal(e.target.value);\n              }}\n              value={h}\n              title={h}\n            />\n            <label\n              className={cn(styles.label, styles[`label-${i + 1}`])}\n              htmlFor={`align-horiz-${h}`}\n            >\n              <img aria-invalid=\"true\" alt=\"\" src={svgMap[h]} />\n              <span className=\"visually-hidden\">{h}</span>\n            </label>\n          </div>\n        ))}\n      </fieldset>\n      <fieldset className={styles.fieldset}>\n        <legend className=\"visually-hidden\">Select a vertical alignment</legend>\n        {[\"top\", \"middle\", \"bottom\"].map((v, i) => (\n          <div className={cn(\"form-group\", styles.wrap)} key={`align-vert-${v}`}>\n            <input\n              className={styles.radio}\n              type=\"radio\"\n              name=\"vertical\"\n              id={`align-vert-${v}`}\n              checked={v === activeVert}\n              onChange={(e) => {\n                setActiveVert(e.target.value);\n                onChangeVertical(e.target.value);\n              }}\n              value={v}\n              title={v}\n            />\n            <label\n              className={cn(styles.label, styles[`label-${i + 1}`])}\n              htmlFor={`align-vert-${v}`}\n            >\n              <img aria-invalid=\"true\" alt=\"\" src={svgMap[v]} />\n              <span className=\"visually-hidden\">{v}</span>\n            </label>\n          </div>\n        ))}\n      </fieldset>\n    </div>\n  );\n}\n\nAlignment.propTypes = {\n  /**\n   * Add a className to the containing fieldset to alter styles locally\n   */\n  className: PropTypes.string,\n\n  /**\n   * Set the selected horizontal alignment\n   */\n  selectedHorizontal: PropTypes.oneOf([\"left\", \"center\", \"right\"]),\n\n  /**\n   * Set the selected vertical alignment\n   */\n  selectedVertical: PropTypes.oneOf([\"top\", \"middle\", \"bottom\"]),\n\n  onChangeHorizontal: PropTypes.func.isRequired,\n\n  onChangeVertical: PropTypes.func.isRequired,\n};\n\nexport default Alignment;\n","import { useEffect, useState, useRef } from \"react\";\nimport { connect } from \"react-redux\";\n\nimport { updateItem } from \"canvas/canvasSlice\";\nimport { setNewNote } from \"features/note/noteSlice\";\n\nimport Slider from \"components/slider\";\nimport Modal from \"components/modal\";\nimport ColorPicker from \"components/colorPicker\";\nimport Alignment from \"components/alignment\";\n\nimport { cn } from \"utils\";\nimport { NOTE } from \"features/tools/constants\";\nimport styles from \"./addNoteModal.module.css\";\n\nconst ColorPalette = [\"#feff9c\", \"#6ed2d0\", \"#def350\", \"#ff6b81\", \"#ff339a\", \"#ff992a\"];\n\nconst defaultNote = {\n  type: NOTE,\n  id: null,\n  x: null,\n  y: null,\n  width: 300,\n  height: 300,\n  text: \"\",\n  fontSize: 32,\n  color: ColorPalette[0],\n  scaleX: 0.75,\n  scaleY: 0.75,\n  rotation: 0,\n  align: \"center\",\n  verticalAlign: \"middle\",\n};\n\nfunction AddNoteModal({\n  onSave = () => {},\n  onCancel = () => {},\n  onClose = () => {}, // closing for any reason, cancel or save\n  note = defaultNote,\n  x,\n  y,\n  updateItem,\n  setNewNote,\n}) {\n  const [editText, setEditText] = useState(note.text);\n  const [fontSize, setFontSize] = useState(note.fontSize);\n  const [currentColor, setCurrentColor] = useState(note.color);\n  const [textHoriz, setTextHoriz] = useState(note.align);\n  const [textVert, setTextVert] = useState(note.verticalAlign);\n  const noteRef = useRef(null);\n  const noteWrapRef = useRef(null);\n\n  const modalRef = useRef(null);\n\n  useEffect(() => {\n    if (noteRef.current) {\n      noteRef.current.focus();\n    }\n  }, [noteRef]);\n\n  return (\n    <Modal\n      id=\"addNote\"\n      title=\"Add Sticky Note\"\n      hideTitle\n      ref={modalRef}\n      onHide={() => {\n        onClose();\n      }}\n    >\n      <div>\n        <form\n          onSubmit={(e) => {\n            e.preventDefault();\n\n            const newNote = {\n              text: editText,\n              fontSize,\n              color: currentColor,\n              align: textHoriz,\n              verticalAlign: textVert\n            };\n\n            if (!note.id) {\n              // new note\n              newNote.x = x;\n              newNote.y = y;\n              const bounds = noteWrapRef.current.getBoundingClientRect();\n              newNote.origin = { x: bounds.x, y: bounds.y };\n              setNewNote(Object.assign({}, note, newNote));\n            } else {\n              // update to existing note\n              updateItem(Object.assign({}, note, newNote));\n            }\n\n            onSave();\n            modalRef.current.hide();\n          }}\n        >\n          <div\n            ref={noteWrapRef}\n            style={{ backgroundColor: currentColor }}\n            className={cn(\"form-group\", \"flex-center\", styles.note)}\n          >\n            <label className=\"visually-hidden\" id=\"stickyNoteLabel\">\n              Enter your sticky note text\n            </label>\n            <div className={styles.textContainer}>\n              <div\n                ref={noteRef}\n                style={{\n                  fontSize: fontSize + \"px\",\n                  // @ts-ignore\n                  textAlign: textHoriz,\n                  verticalAlign: textVert\n                }}\n                role=\"textbox\"\n                aria-multiline=\"true\"\n                aria-labelledby=\"stickyNoteLabel\"\n                aria-required=\"true\"\n                className={styles.textEdit}\n                contentEditable={true}\n                suppressContentEditableWarning={true}\n                tabIndex={0}\n                onInput={(e) => {\n                  // @ts-ignore\n                  setEditText(e.target.textContent);\n                }}\n              >\n                {note.text}\n              </div>\n            </div>\n          </div>\n          <div className={styles.actions}>\n            <Slider\n              hideLabel={false}\n              id=\"noteFontSize\"\n              label=\"Change the font size\"\n              min=\"32\"\n              max=\"128\"\n              startingValue={fontSize}\n              onChange={(e) => {\n                setFontSize(Number(e.target.value));\n              }}\n            />\n            <Alignment\n              className=\"mb-3\"\n              selectedHorizontal={textHoriz}\n              selectedVertical={textVert}\n              onChangeHorizontal={(newAlignment) => {\n                setTextHoriz(newAlignment);\n              }}\n              onChangeVertical={(newAlignment) => {\n                setTextVert(newAlignment);\n              }}\n            />\n            <div className={cn(\"p-2\", styles.colors)}>\n              <ColorPicker\n                selected={currentColor}\n                palette={ColorPalette}\n                onSelectColor={(color) => {\n                  setCurrentColor(color);\n                }}\n              />\n            </div>\n            <div className=\"d-flex justify-content-end mt-4 pe-2\">\n              <button\n                type=\"button\"\n                className=\"btn btn-secondary\"\n                onClick={(e) => {\n                  e.preventDefault();\n                  onCancel();\n                  modalRef.current.hide();\n                }}\n              >\n                cancel\n              </button>\n\n              <button className=\"btn btn-primary ms-2\" type=\"submit\">\n                save\n              </button>\n            </div>\n          </div>\n        </form>\n      </div>\n    </Modal>\n  );\n}\n\nconst matchDispatchToProps = {\n  updateItem,\n  setNewNote,\n};\n\nexport default connect(null, matchDispatchToProps)(AddNoteModal);\n","import PropTypes from \"prop-types\";\nimport { Line } from \"react-konva\";\nimport { ERASE } from \"features/tools/constants\";\n\nexport const linePropType = PropTypes.shape({\n  tool: PropTypes.string.isRequired,\n  color: PropTypes.string.isRequired,\n  thickness: PropTypes.number.isRequired,\n  points: PropTypes.arrayOf(PropTypes.number).isRequired,\n});\n\nfunction DrawSingleLine({ line }) {\n  if (!line) return null;\n  return (\n    <Line\n      points={line.points}\n      stroke={line.color}\n      strokeWidth={line.tool === ERASE ? 20 : line.thickness}\n      tension={0.5}\n      lineCap={line.tool === ERASE ? \"square\" : \"round\"}\n      globalCompositeOperation={line.tool === ERASE ? \"destination-out\" : \"source-over\"}\n    />\n  );\n}\n\nDrawSingleLine.propTypes = {\n  line: linePropType,\n};\n\nexport default DrawSingleLine;\n","import PropTypes from \"prop-types\";\nimport DrawSingleLine, { linePropType } from \"features/draw/line\";\n\nfunction Draw({ lines = [] }) {\n  return (\n    <>\n      {lines.map((line, i) => (\n        <DrawSingleLine key={`line-${i}`} line={line} />\n      ))}\n    </>\n  );\n}\n\nDraw.propTypes = {\n  lines: PropTypes.arrayOf(linePropType),\n};\n\nexport default Draw;\n","import React, { useRef, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Transformer } from \"react-konva\";\n\nfunction Transformable({\n  enabled = false,\n  onTransformEnd,\n  onTransform = (node, e) => {},\n  minWidth = 100,\n  minHeight = 100,\n  withRef = null,\n  children,\n\n  /**\n   * opinionated Transform option defaults\n   */\n  anchors = [\"top-left\", \"top-right\", \"bottom-right\", \"bottom-left\"],\n  keepRatio = true,\n  rotateEnabled = true,\n\n  /**\n   * see docs for more Transformer options\n   * https://konvajs.org/api/Konva.Transformer.html\n   */\n  ...transformProps\n}) {\n  const nodeRef = useRef(null);\n  const trRef = useRef(null);\n\n  useEffect(() => {\n    if (enabled && trRef.current) {\n      // we need to attach transformer manually\n      trRef.current.nodes([nodeRef.current]);\n      trRef.current.getLayer().batchDraw();\n    }\n  }, [enabled]);\n\n  useEffect(() => {\n    if (typeof withRef === \"function\" && nodeRef.current) {\n      withRef(nodeRef);\n    }\n  }, [nodeRef, withRef]);\n\n  function onEnd(e) {\n    onTransformEnd(nodeRef.current, e);\n  }\n\n  function duringTransform(e) {\n    onTransform(nodeRef.current, e);\n  }\n\n  return (\n    <>\n      {/* Transformable only works on a single child */}\n      {React.cloneElement(children, {\n        ref: nodeRef,\n        onTransformEnd: onEnd,\n        onTransform: duringTransform,\n      })}\n\n      {enabled && (\n        <Transformer\n          {...transformProps}\n          ref={trRef}\n          keepRatio={keepRatio}\n          rotateEnabled={rotateEnabled}\n          enabledAnchors={anchors}\n          boundBoxFunc={(oldBox, newBox) => {\n            if (newBox.width < minWidth || newBox.height < minHeight) {\n              return oldBox;\n            }\n            return newBox;\n          }}\n        />\n      )}\n    </>\n  );\n}\n\nTransformable.propTypes = {\n  /**\n   * Toggle the transform on/off\n   */\n  enabled: PropTypes.bool,\n\n  /**\n   * set which anchors you want to add to the transform\n   * https://konvajs.org/api/Konva.Transformer.html#enabledAnchors__anchor\n   */\n  anchors: PropTypes.arrayOf(PropTypes.string),\n\n  /**\n   * set should we keep ratio while resize anchors at corner\n   * https://konvajs.org/api/Konva.Transformer.html#keepRatio__anchor\n   */\n  keepRatio: PropTypes.bool,\n\n  /**\n   * set ability to rotate.\n   */\n  rotateEnabled: PropTypes.bool,\n\n  /**\n   * callback when transform has been completed. It will get pass 2 args:\n   * (currentNode, event)\n   */\n  onTransformEnd: PropTypes.func,\n\n  /**\n   * set a min width to the element\n   */\n  minWidth: PropTypes.number,\n\n  /**\n   * set a min height to the element\n   */\n  minHeight: PropTypes.number,\n\n  /**\n   * runs a function any time the child ref changes\n   */\n  withRef: PropTypes.func,\n\n  /**\n   * Must be a single child and a Konva react element\n   */\n  children: PropTypes.node.isRequired,\n};\n\nexport default Transformable;\n","import { connect } from \"react-redux\";\nimport PropTypes from \"prop-types\";\nimport { Rect, Group, Text } from \"react-konva\";\nimport { addItem, updateItem } from \"canvas/canvasSlice\";\nimport { setActiveNote, clearNewNote } from \"features/note/noteSlice\";\nimport { POINTER } from \"features/tools/constants\";\nimport Transformable from \"components/Transformable\";\n\nexport const notePropTypes = PropTypes.shape({\n  id: PropTypes.string,\n  x: PropTypes.number.isRequired,\n  y: PropTypes.number.isRequired,\n  width: PropTypes.number.isRequired,\n  height: PropTypes.number.isRequired,\n  text: PropTypes.string.isRequired,\n  fontSize: PropTypes.number.isRequired,\n  color: PropTypes.string.isRequired,\n  scaleX: PropTypes.number,\n  scaleY: PropTypes.number,\n  rotation: PropTypes.number,\n  align: PropTypes.string,\n  verticalAlign: PropTypes.string\n});\n\nfunction Note({ note, setActiveNote, currentTool, clearNewNote, addItem, updateItem }) {\n  function onClick(e) {\n    /* handle double-click which puts the note into edit mode */\n    if (e.evt.detail === 2) {\n      setActiveNote(note);\n      return;\n    }\n  }\n\n  function setSelected(e) {\n    /* handle select and transform */\n    if (e.evt.detail === 1 && !note.selected) {\n      updateItem({\n        ...note,\n        selected: true,\n      });\n    }\n  }\n\n  function onDragEnd(e) {\n    updateItem({\n      ...note,\n      x: e.target.x(),\n      y: e.target.y(),\n    });\n  }\n\n  function onTransformEnd(node) {\n    updateItem({\n      ...note,\n      x: node.x(),\n      y: node.y(),\n      scaleX: node.scaleX(),\n      scaleY: node.scaleY(),\n      rotation: node.rotation(),\n    });\n  }\n\n  return (\n    <Transformable\n      enabled={note.selected && currentTool === POINTER}\n      onTransformEnd={onTransformEnd}\n      withRef={(noteRef) => {\n        /**\n         * This will handle animating the note when first added to the canvas\n         * and then once done it'll remove the note from the temporary \"newNote\"\n         * state and move it to the main undoable state\n         */\n        if (noteRef.current && note.origin) {\n          noteRef.current.to({\n            x: note.x,\n            y: note.y,\n            duration: 0.2,\n            onFinish: () => {\n              addItem({\n                ...note,\n                origin: null,\n              });\n              clearNewNote();\n            },\n          });\n        }\n      }}\n    >\n      <Group\n        draggable={currentTool === POINTER}\n        x={note.origin ? note.origin.x : note.x}\n        y={note.origin ? note.origin.y : note.y}\n        rotation={note.rotation}\n        onClick={onClick}\n        onDragEnd={onDragEnd}\n        onMouseDown={setSelected}\n        scaleX={note.scaleX}\n        scaleY={note.scaleY}\n      >\n        <Rect\n          fill={note.color}\n          width={note.width}\n          height={note.height}\n          shadowOffsetX={0}\n          shadowOffsetY={5}\n          shadowBlur={3}\n          shadowEnabled={true}\n          shadowColor=\"#3c4043\"\n          shadowOpacity={0.26}\n        />\n        <Text\n          width={note.width}\n          height={note.height}\n          padding={10}\n          text={note.text}\n          fontSize={note.fontSize}\n          fontFamily=\"sans-serif\"\n          fill=\"#000000\"\n          align={note.align}\n          verticalAlign={note.verticalAlign}\n          fontStyle=\"bold\"\n        />\n      </Group>\n    </Transformable>\n  );\n}\n\nNote.propTypes = {\n  note: notePropTypes.isRequired,\n  updateItem: PropTypes.func.isRequired,\n};\n\nconst mapStateToProps = (state) => ({\n  currentTool: state.tool.cursor,\n});\n\nconst matchDispatchToProps = {\n  addItem,\n  updateItem,\n  setActiveNote,\n  clearNewNote,\n};\n\nexport default connect(mapStateToProps, matchDispatchToProps)(Note);\n","import { createSlice } from \"@reduxjs/toolkit\";\n\nconst textSlice = createSlice({\n  name: \"text\",\n  initialState: { activeText: undefined },\n  reducers: {\n    setActiveText(state, action) {\n      state.activeText = action.payload;\n    },\n    clearActiveText(state) {\n      state.activeText = undefined;\n    },\n  },\n});\n\nexport const { setActiveText, clearActiveText } = textSlice.actions;\n\nexport default textSlice.reducer;\n","import { useRef } from \"react\";\nimport { connect } from \"react-redux\";\nimport PropTypes from \"prop-types\";\nimport { Text } from \"react-konva\";\nimport debounce from \"lodash-es/debounce\";\nimport { updateItem } from \"canvas/canvasSlice\";\nimport { setActiveText } from \"features/text/textSlice\";\nimport { round100th } from \"utils\";\nimport { POINTER } from \"features/tools/constants\";\nimport Transformable from \"components/Transformable\";\n\nexport const textPropTypes = PropTypes.shape({\n  id: PropTypes.string,\n  x: PropTypes.number.isRequired,\n  y: PropTypes.number.isRequired,\n  width: PropTypes.number.isRequired,\n  height: PropTypes.number.isRequired,\n  text: PropTypes.string,\n  fontSize: PropTypes.number.isRequired,\n  color: PropTypes.string.isRequired,\n  scaleX: PropTypes.number,\n  scaleY: PropTypes.number,\n  rotation: PropTypes.number,\n});\n\nfunction TextSingle({ data, updateItem, setActiveText, currentTool, currentActiveText }) {\n  const lastScale = useRef({ scaleX: 1, scaleY: 1 });\n\n  function onClick(e) {\n    /* handle double-click which puts the text into edit mode */\n    if (e.evt.detail === 2) {\n      setActiveText(data);\n      return;\n    }\n  }\n\n  function setSelected(e) {\n    /* handle select and transform */\n    if (e.evt.detail === 1 && !data.selected) {\n      updateItem({\n        ...data,\n        selected: true,\n      });\n    }\n  }\n\n  function onDragEnd(e) {\n    updateItem({\n      ...data,\n      x: e.target.x(),\n      y: e.target.y(),\n    });\n  }\n\n  function onTransformEnd(node) {\n    const scaleX = round100th(node.scaleX());\n    const scaleY = round100th(node.scaleY());\n\n    updateItem({\n      ...data,\n      x: node.x(),\n      y: node.y(),\n      scaleX,\n      scaleY,\n      rotation: node.rotation(),\n      // width: node.width(),\n    });\n  }\n\n  const onTransform = debounce((node) => {\n    const scaleX = round100th(node.scaleX());\n    const scaleY = round100th(node.scaleY());\n    // console.log(scaleX, scaleY, lastScale.current);\n\n    if (scaleX === lastScale.current.scaleX && scaleY === lastScale.current.scaleY) {\n      return;\n    }\n\n    if (scaleX !== lastScale.current.scaleX && scaleY === lastScale.current.scaleY) {\n      node.setAttrs({\n        scaleX: lastScale.current.scaleX,\n        width: Math.max(node.width() * scaleX, 40),\n      });\n      return;\n    }\n\n    lastScale.current = { scaleX, scaleY };\n  }, 5);\n\n  return (\n    <Transformable\n      anchors={[\n        \"top-left\",\n        \"top-right\",\n        \"bottom-left\",\n        \"bottom-right\",\n        \"middle-left\",\n        \"middle-right\",\n      ]}\n      // anchorCornerRadius={5}\n      minWidth={40}\n      minHeight={40}\n      keepRatio={true}\n      enabled={data.selected && currentTool === POINTER && currentActiveText?.id !== data.id}\n      onTransformEnd={onTransformEnd}\n      onTransform={onTransform}\n    >\n      <Text\n        draggable={currentTool === POINTER}\n        x={data.x}\n        y={data.y}\n        rotation={data.rotation}\n        onClick={onClick}\n        onDragEnd={onDragEnd}\n        onMouseDown={setSelected}\n        scaleX={data.scaleX}\n        scaleY={data.scaleY}\n        width={data.width}\n        height={data.height}\n        text={currentActiveText?.id === data.id ? \"\" : data.text}\n        fontSize={data.fontSize}\n        fontFamily=\"sans-serif\"\n        fill=\"#000000\"\n        align=\"left\"\n        verticalAlign=\"top\"\n        fontStyle=\"bold\"\n        lineHeight={1.5}\n      />\n    </Transformable>\n  );\n}\n\nTextSingle.propTypes = {\n  data: textPropTypes,\n  updateItem: PropTypes.func,\n  setActiveText: PropTypes.func,\n  currentTool: PropTypes.string,\n};\n\nconst mapStateToProps = (state) => ({\n  currentTool: state.tool.cursor,\n  currentActiveText: state.text.activeText,\n});\n\nconst matchDispatchToProps = {\n  updateItem,\n  setActiveText,\n};\n\nexport default connect(mapStateToProps, matchDispatchToProps)(TextSingle);\n","import { Layer } from \"react-konva\";\nimport Draw from \"features/draw\";\nimport Note from \"features/note\";\nimport Text from \"features/text\";\nimport { NOTE, TEXT } from \"features/tools/constants\";\n\nfunction DrawItem({ item }) {\n  switch (item.type) {\n    case NOTE:\n      return <Note note={item} key={item.id} />;\n    case TEXT:\n      return <Text data={item} key={item.id} />;\n    default:\n      return null;\n  }\n}\n\n/**\n * TODO: merge state into one array so that order can be manipulated\n */\nfunction LayerManager({ items, lines, newNote }) {\n  return (\n    <Layer>\n      <Draw lines={lines} />\n      {items.map((item) => (\n        <DrawItem item={item} key={item.id} />\n      ))}\n      {newNote && <Note note={newNote} />}\n    </Layer>\n  );\n}\n\nexport default LayerManager;\n","import { useEffect, useRef } from \"react\";\nimport { ACTIONS } from \"utils/KEYS\";\nimport styles from \"./index.module.scss\";\n\nfunction Placer({ width, height, onFinish, onCancel }) {\n  const ref = useRef(null);\n\n  useEffect(() => {\n    function onMove(e) {\n      if (ref.current) {\n        ref.current.style.top = `${e.clientY}px`;\n        ref.current.style.left = `${e.clientX}px`;\n      }\n    }\n\n    function onClick(e) {\n      onFinish(e.clientX, e.clientY, e);\n    }\n\n    function onKeyUp(e) {\n      if (e.key === ACTIONS.esc) {\n        onCancel();\n      }\n    }\n\n    window.addEventListener(\"mousemove\", onMove);\n    window.addEventListener(\"click\", onClick);\n    window.addEventListener(\"keyup\", onKeyUp);\n\n    return function cleanup() {\n      window.removeEventListener(\"mousemove\", onMove);\n      window.removeEventListener(\"click\", onClick);\n      window.removeEventListener(\"keyup\", onKeyUp);\n    };\n  }, [onCancel, onFinish]);\n\n  return (\n    <div\n      ref={ref}\n      style={{\n        width: `${width}px`,\n        height: `${height}px`,\n      }}\n      className={styles.placer}\n    />\n  );\n}\n\nexport default Placer;\n","import { useRef } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Draggable from \"components/draggable\";\nimport KEYS from \"utils/KEYS\";\nimport { TEXT } from \"features/tools/constants\";\nimport { textPropTypes } from \"features/text\";\nimport styles from \"./index.module.scss\";\n\nconst defaultText = {\n  type: TEXT,\n  x: 0,\n  y: 0,\n  width: null,\n  height: null,\n  text: \"\",\n  fontSize: 32,\n  color: \"#000000\",\n  scaleX: 1,\n  scaleY: 1,\n  rotation: 0,\n};\n\nfunction FlyingTextInput({ x = 0, y = 0, textData = defaultText, onSave, onCancel }) {\n  const positionRef = useRef({ x, y });\n  const inputRef = useRef(null);\n\n  function onKeyUp(e) {\n    if (e.key === KEYS.esc) {\n      onCancel();\n    }\n  }\n\n  const styleObj = textData.width ? { width: textData.width } : { width: 400 };\n\n  return (\n    <Draggable\n      id=\"flyingTextInput\"\n      startX={x}\n      // 20px padding-top of container + 5px padTop of input\n      startY={y - 25}\n      onDragEnd={(pos) => {\n        positionRef.current = pos;\n        console.log(positionRef.current, pos);\n      }}\n    >\n      <form className={styles.inputContainer}>\n        <label className=\"visually-hidden\" htmlFor=\"enterText\">\n          Add text to canvas\n        </label>\n        <div\n          style={styleObj}\n          ref={inputRef}\n          autoCorrect=\"off\"\n          autoCapitalize=\"off\"\n          role=\"textbox\"\n          aria-multiline=\"true\"\n          aria-labelledby=\"enterText\"\n          className={styles.input}\n          contentEditable={true}\n          suppressContentEditableWarning={true}\n          tabIndex={0}\n          onKeyUp={onKeyUp}\n          onBlur={(e) => {\n            if (!e.target.textContent.trim()) {\n              onCancel();\n              return;\n            }\n            const rect = inputRef.current.getBoundingClientRect();\n            onSave({\n              ...textData,\n              x: positionRef.current.x,\n              y: positionRef.current.y,\n              width: rect.width,\n              height: rect.height,\n              text: e.target.textContent,\n            });\n          }}\n        >\n          {textData.text}\n        </div>\n      </form>\n    </Draggable>\n  );\n}\n\nFlyingTextInput.propTypes = {\n  x: PropTypes.number.isRequired,\n  y: PropTypes.number.isRequired,\n  text: textPropTypes,\n  onSave: PropTypes.func.isRequired,\n  onCancel: PropTypes.func.isRequired,\n};\n\nexport default FlyingTextInput;\n","import { useState, useRef, useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { selectLines, setLines as reducerSetLine } from \"canvas/canvasSlice\";\nimport { DRAW, TOOL_SIZE } from \"features/tools/constants\";\n\nconst eraserOffset = TOOL_SIZE / 2;\n\nfunction connectPoints(e, tool, lines) {\n  const point = e.target.getStage().getPointerPosition();\n  let lastLine = lines[lines.length - 1];\n\n  /**\n   * Offset for the Draw tool to get it to match up with the tip of the pen\n   * Offset for the Erase tool to center it within the square\n   */\n  if (tool === DRAW) {\n    lastLine.points = lastLine.points.concat([point.x, point.y + TOOL_SIZE]);\n  } else {\n    lastLine.points = lastLine.points.concat([point.x + eraserOffset, point.y + eraserOffset]);\n  }\n\n  // replace last\n  lines.splice(lines.length - 1, 1, lastLine);\n  return Array.from(lines);\n}\n\n\n\n/**\n * useDraw hook\n * for better performance this hook keeps the lines in its own internal state and\n * updates global redux state only on MouseUp.\n */\nfunction useDraw() {\n  const [tool, setTool] = useState(DRAW);\n  const [lines, setLines] = useState([]);\n  const isDrawing = useRef(false);\n  const isMoving = useRef(false);\n  const dispatch = useDispatch();\n\n  const color = useSelector((state) => state.tool.draw.color);\n  const thickness = useSelector((state) => state.tool.draw.thickness);\n  const linesFromState = useSelector(selectLines);\n\n  /**\n   * When lines in redux state are updated because of undo/redo then we need\n   * to update the local state here\n   */\n  useEffect(() => {\n    setLines(linesFromState);\n  }, [linesFromState, setLines]);\n\n  const drawMouseDown = (e) => {\n    if (e.evt.button !== 0) return;\n\n    isDrawing.current = true;\n    const pos = e.target.getStage().getPointerPosition();\n\n    if (tool === DRAW) {\n      const newLines = Array.from(lines);\n      newLines.push({ tool, color, thickness, points: [pos.x, pos.y + TOOL_SIZE] });\n      setLines(newLines);\n    } else {\n      const newLines = Array.from(lines);\n      newLines.push({ tool, color, thickness, points: [pos.x + eraserOffset, pos.y + eraserOffset] });\n      setLines(newLines);\n    }\n  };\n\n  const drawMouseMove = (e) => {\n    // no drawing - skipping\n    if (!isDrawing.current) {\n      return;\n    }\n    isMoving.current = true;\n    setLines(connectPoints(e, tool, lines));\n  };\n\n  const drawMouseUp = (e) => {\n    isDrawing.current = false;\n\n    if (!isMoving.current) {\n      setLines(connectPoints(e, tool, lines));\n    } else {\n      isMoving.current = false;\n    }\n\n    setTimeout(() => {\n      dispatch(reducerSetLine(lines));\n    }, 1);\n  };\n\n  return {\n    lines,\n    drawMouseDown,\n    drawMouseMove,\n    drawMouseUp,\n    setDrawTool: setTool,\n  };\n}\n\nexport default useDraw;\n","import { useRef } from \"react\";\nimport { useState, useEffect } from \"react\";\n\nconst states = [\n  // idle state\n  {\n    isIdle: true,\n    isPlacing: false,\n    isPlaced: false,\n  },\n  // active state\n  {\n    isIdle: false,\n    isPlacing: true,\n    isPlaced: false,\n  },\n  // completed state\n  {\n    isIdle: false,\n    isPlacing: false,\n    isPlaced: true,\n  },\n];\n\nfunction usePlacing(enabled = false) {\n  const index = useRef(0)\n  const [currentState, setCurrentState] = useState(states[index.current]);\n  const [position, setPosition] = useState({ x: 0, y: 0 });\n\n  function reset() {\n    index.current = 0;\n    setCurrentState(states[0]);\n  }\n\n  function next(x, y) {\n    if (x && y) {\n      setPosition({ x, y });\n    }\n    if (index.current === states.length - 1) {\n      reset();\n    } else {\n      index.current = index.current + 1;\n      setCurrentState(states[index.current]);\n    }\n  }\n\n  useEffect(() => {\n    if (enabled) {\n      index.current = 1;\n      setCurrentState(states[1]);\n    }\n  }, [enabled]);\n\n  return {\n    state: currentState,\n    reset,\n    position,\n    next,\n  };\n}\n\nexport default usePlacing;\n","import { useEffect, useState } from \"react\";\nimport { Stage, Rect, Layer } from \"react-konva\";\nimport { connect, ReactReduxContext, Provider } from \"react-redux\";\nimport debounce from \"lodash-es/debounce\";\n\n// commponents\nimport Tools from \"features/tools\";\nimport AddNoteModal from \"features/note/addNoteModal\";\nimport LayerManager from \"canvas/layerManager\";\nimport Placer from \"components/placer\";\nimport FlyingTextInput from \"features/text/flyingTextInput\";\n\n// state\nimport { setTool } from \"features/tools/toolSlice\";\nimport { clearActiveNote } from \"features/note/noteSlice\";\nimport { addItem, deleteItem, updateItem, clearSelected } from \"canvas/canvasSlice\";\nimport { clearActiveText } from \"features/text/textSlice\";\n\n// other\nimport { DRAW, ERASE, NOTE, POINTER, TEXT } from \"features/tools/constants\";\nimport useDraw from \"features/draw/useDraw\";\nimport usePlacing from \"hooks/usePlacing\";\nimport bgPattern from \"assets/bg-pattern2.png\";\nimport KEYS from \"utils/KEYS\";\n\n// for retina perf, set tip #9 https://konvajs.org/docs/performance/All_Performance_Tips.html\n// import Konva from \"konva\";\n// Konva.pixelRatio = 1;\n\nfunction Canvas({\n  currentTool,\n  setTool,\n  canvasItems,\n  editNote,\n  clearActiveNote,\n  newNote,\n  lastShortcut,\n  clearActiveText,\n  editText,\n  deleteItem,\n  addItem,\n  updateItem,\n  clearSelected,\n}) {\n  const { lines, drawMouseDown, drawMouseMove, drawMouseUp, setDrawTool } = useDraw();\n  const [stageDim, setStageDim] = useState({ w: window.innerWidth, h: window.innerHeight });\n  const [bgImageLoadded, setBgImageLoadded] = useState(false);\n  const notePlacing = usePlacing(NOTE === currentTool);\n  const textPlacing = usePlacing(TEXT === currentTool);\n\n  const bgImage = new Image();\n  bgImage.onload = () => {\n    setBgImageLoadded(true);\n  };\n  bgImage.src = bgPattern;\n\n  useEffect(() => {\n    setDrawTool(currentTool);\n  }, [currentTool, setDrawTool]);\n\n  useEffect(() => {\n    if (lastShortcut === KEYS.del || lastShortcut === KEYS.backspace) {\n      deleteItem();\n      return;\n    }\n    if (lastShortcut === KEYS.esc) {\n      if (notePlacing.state.isPlacing) {\n        notePlacing.reset();\n      } else if (textPlacing.state.isPlacing) {\n        textPlacing.reset();\n      } else if (canvasItems.items.find((e) => e.selected)) {\n        clearSelected();\n      }\n    }\n  }, [lastShortcut, deleteItem, notePlacing, textPlacing, canvasItems.items, clearSelected]);\n\n  useEffect(() => {\n    function onResize() {\n      setStageDim({ w: window.innerWidth, h: window.innerHeight });\n    }\n    const debouncedResize = debounce(onResize, 25);\n    window.addEventListener(\"resize\", debouncedResize);\n\n    return function cleanup() {\n      window.removeEventListener(\"resize\", debouncedResize);\n    };\n  }, []);\n\n  useEffect(() => {\n    if (currentTool !== TEXT && textPlacing.state.isPlacing) {\n      textPlacing.reset();\n      return;\n    }\n\n    if (currentTool !== NOTE && notePlacing.state.isPlacing) {\n      notePlacing.reset();\n    }\n  }, [currentTool, notePlacing, textPlacing]);\n\n  return (\n    <>\n      <ReactReduxContext.Consumer>\n        {({ store }) => (\n          <Stage\n            width={stageDim.w}\n            height={stageDim.h}\n            tabIndex={0}\n            onMouseDown={(e) => {\n              if (currentTool === DRAW || currentTool === ERASE) {\n                drawMouseDown(e);\n              }\n              if (e.target.constructor.name === \"Stage\" || e.target.constructor.name === \"Line\") {\n                clearSelected();\n              }\n            }}\n            onMousemove={(e) => {\n              if (currentTool === DRAW || currentTool === ERASE) {\n                drawMouseMove(e);\n              }\n            }}\n            onMouseup={(e) => {\n              if (currentTool === DRAW || currentTool === ERASE) {\n                drawMouseUp(e);\n              }\n            }}\n            className={`whiteboard cursor-${currentTool}`}\n          >\n            {/* Background pattern layer */}\n            <Layer listening={false}>\n              {bgImageLoadded && (\n                <Rect\n                  x={0}\n                  y={0}\n                  width={stageDim.w}\n                  height={stageDim.h}\n                  fillPatternImage={bgImage}\n                  listening={false}\n                />\n              )}\n            </Layer>\n            <Provider store={store}>\n              <LayerManager items={canvasItems.items} lines={lines} newNote={newNote} />\n            </Provider>\n          </Stage>\n        )}\n      </ReactReduxContext.Consumer>\n\n      {notePlacing.state.isPlacing && (\n        <Placer\n          width=\"200\"\n          height=\"200\"\n          onFinish={(x, y) => {\n            notePlacing.next(x, y);\n          }}\n          onCancel={() => {\n            notePlacing.reset();\n            setTool(POINTER);\n          }}\n        />\n      )}\n\n      {textPlacing.state.isPlacing && (\n        <Placer\n          width=\"400\"\n          height=\"80\"\n          onFinish={(x, y) => {\n            textPlacing.next(x, y);\n          }}\n          onCancel={() => {\n            textPlacing.reset();\n            setTool(POINTER);\n          }}\n        />\n      )}\n\n      <Tools />\n\n      {textPlacing.state.isPlaced && (\n        <FlyingTextInput\n          x={textPlacing.position.x}\n          y={textPlacing.position.y}\n          onSave={(text) => {\n            addItem(text);\n            setTool(POINTER);\n            clearActiveText();\n            textPlacing.reset();\n          }}\n          onCancel={() => {\n            setTool(POINTER);\n            clearActiveText();\n            textPlacing.reset();\n          }}\n        />\n      )}\n\n      {editText && (\n        <FlyingTextInput\n          x={editText.x}\n          y={editText.y}\n          textData={editText}\n          onSave={(updatedTextData) => {\n            updateItem(updatedTextData);\n            setTool(POINTER);\n            clearActiveText();\n          }}\n          onCancel={() => {\n            setTool(POINTER);\n            clearActiveText();\n          }}\n        />\n      )}\n\n      {(notePlacing.state.isPlaced || editNote) && (\n        <AddNoteModal\n          note={editNote}\n          x={notePlacing.position.x}\n          y={notePlacing.position.y}\n          onClose={() => {\n            setTool(POINTER);\n            clearActiveNote();\n            notePlacing.reset();\n          }}\n        />\n      )}\n    </>\n  );\n}\n\nconst mapStateToProps = (state) => ({\n  currentTool: state.tool.cursor,\n  canvasItems: state.canvas.present,\n  editNote: state.note.activeNote,\n  newNote: state.note.newNote,\n  editText: state.text.activeText,\n});\n\nconst mapDispatchToProps = {\n  setTool,\n  clearActiveNote,\n  clearActiveText,\n  deleteItem,\n  addItem,\n  updateItem,\n  clearSelected,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Canvas);\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAB50lEQVR4Xu3VPU9UUQAG4UMClAQlrBRrIVJLKf+/glJqPgq2kDWCoVsw0YSCim4p5obn/oCTuTN5z9lYrVb/hi9jYEOQTItnEEFaPQSJ9RBEkJqBGI83RJCYgRiOhQgSMxDDsRBBYgZiOBYiSMxADMdCBIkZiOFYiCAxAzEcCxEkZiCGYyGCxAzEcCxEkJiBGI6FCBIzEMOxEEFiBmI4FiJIzEAMx0IEiRmI4ViIIDEDMRwLESRmIIZjIYLEDMRwLESQmIEYjoUIEjMQw5nMQh6f/o7F7Z+x/P0wZns7Y/5pd2xvbcZ0ro8zmSBXN7/G2fnFyx9//3Y0Dj/vr28gdsJkgpz+uBzXi+WLvi/z2Tg5/hrTuT7OZIJYyPqx3/SE5zfk5/1Y3j2M2cedMT/44A15U8MOe9XAZK6s99JPkFhpQQSJGYjhWIggMQMxHAsRJGYghmMhgsQMxHAsRJCYgRiOhQgSMxDDsRBBYgZiOBYiSMxADMdCBIkZiOFYiCAxAzEcCxEkZiCGYyGCxAzEcCxEkJiBGI6FCBIzEMOxEEFiBmI4FiJIzEAMx0IEiRmI4ViIIDEDMRwLESRmIIZjIYLEDMRwLESQmIEYjoUIEjMQw7EQQWIGYjgWIkjMQAzHQgSJGYjh/Adx+KvcF/eo4AAAAABJRU5ErkJggg==\"","import useShortcuts from \"hooks/useShortcuts\";\n\nimport Canvas from 'canvas';\n\nfunction App() {\n  const { lastShortcut } = useShortcuts();\n\n  return (\n    <div className=\"App\">\n      <Canvas lastShortcut={lastShortcut}/>\n    </div>\n  );\n}\n\nexport default App;\n","import { combineReducers } from \"redux\";\nimport undoable from \"redux-undo\";\nimport canvasReducer from \"canvas/canvasSlice\";\nimport toolReducer from \"features/tools/toolSlice\";\nimport noteReducer from \"features/note/noteSlice\";\nimport textReducer from 'features/text/textSlice';\n\nexport default combineReducers({\n  tool: toolReducer,\n  canvas: undoable(canvasReducer),\n  note: noteReducer,\n  text: textReducer\n});\n","import { configureStore } from \"@reduxjs/toolkit\";\nimport rootReducer from \"app/rootReducer\";\n\nconst store = configureStore({\n  reducer: rootReducer,\n  // middleware: (getDefaultMiddleware) =>\n  //   getDefaultMiddleware({\n  //     immutableCheck: false,\n  //     serializableCheck: false,\n  //   }),\n});\n\nexport default store;\n","import \"styles/global.scss\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Provider } from \"react-redux\";\nimport App from \"app/App\";\nimport store from \"app/store\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"note\":\"addNoteModal_note__gFYx9\",\"textarea\":\"addNoteModal_textarea__12CPn\",\"textContainer\":\"addNoteModal_textContainer__2ESK8\",\"textEdit\":\"addNoteModal_textEdit__2C1sA\",\"actions\":\"addNoteModal_actions__OuQAq\",\"colors\":\"addNoteModal_colors__iM_1T\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"slider_container__2Tm_d\",\"range\":\"slider_range__1xNOW\",\"example\":\"slider_example__313gz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"settingsContainer\":\"drawSettings_settingsContainer__3BARp\",\"show\":\"drawSettings_show__1IpqZ\",\"slider\":\"drawSettings_slider__s1xYo\",\"px\":\"drawSettings_px__239md\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dragContainer\":\"draggable_dragContainer__37P1o\",\"handle\":\"draggable_handle__2zrDe\",\"keyMoving\":\"draggable_keyMoving__j1IX4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"fieldset\":\"colorPicker_fieldset__B-ZSC\",\"radio\":\"colorPicker_radio__2wjUZ\",\"wrap\":\"colorPicker_wrap___SnW6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"inputContainer\":\"flyingTextInput_inputContainer__OjZHS\",\"input\":\"flyingTextInput_input__12fUF\"};"],"sourceRoot":""}